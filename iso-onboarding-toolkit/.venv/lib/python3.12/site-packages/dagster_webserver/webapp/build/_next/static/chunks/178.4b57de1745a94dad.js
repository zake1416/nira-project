"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{8186:(e,n,t)=>{t.d(n,{_:()=>g});var i=t(9329),s=t(6029),o=t(74016),r=t(34419),l=t(36660),a=t(9448),c=t(62978),u=t(12547),d=t(97962),p=t(32228),h=t(98784),m=t(36561);function x(){let e=(0,i._)(["\n  query TickLogEventsQuery($instigationSelector: InstigationSelector!, $tickId: ID!) {\n    instigationStateOrError(instigationSelector: $instigationSelector) {\n      ... on InstigationState {\n        id\n        instigationType\n        tick(tickId: $tickId) {\n          id\n          status\n          timestamp\n          logEvents {\n            events {\n              ...InstigationEventLog\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return x=function(){return e},e}let g=e=>{let{tickId:n,timestamp:t,instigationSelector:i,isOpen:c,onClose:u}=e;return(0,s.jsxs)(o.lG,{isOpen:c,onClose:u,style:{width:"70vw",maxWidth:"1200px",minWidth:"800px"},title:(0,s.jsx)("span",{children:t?(0,s.jsxs)("span",{children:[(0,s.jsxs)("span",{children:["Logs for ",i.name,": "]}),(0,s.jsx)(m.J,{timestamp:t,timeFormat:{showSeconds:!0}})]}):(0,s.jsxs)("span",{children:["Logs for ",i.name]})}),children:[n?(0,s.jsx)(y,{instigationSelector:i,tickId:n}):null,(0,s.jsx)(r.a,{background:l.Tr(),style:{zIndex:3,position:"relative"},children:(0,s.jsx)(o.Es,{topBorder:!0,children:(0,s.jsx)(a.$n,{onClick:u,children:"Done"})})})]})},y=e=>{let{instigationSelector:n,tickId:t}=e,{data:i,loading:o}=(0,h.IT)(f,{variables:{instigationSelector:n,tickId:t},notifyOnNetworkStatusChange:!0}),l=(null==i?void 0:i.instigationStateOrError.__typename)==="InstigationState"&&(null==i?void 0:i.instigationStateOrError.tick)?null==i?void 0:i.instigationStateOrError.tick.logEvents.events:void 0;if(o)return(0,s.jsx)(r.a,{style:{height:500},flex:{justifyContent:"center",alignItems:"center"},children:(0,s.jsx)(c.V,{label:"Loading logs…"})});if(l&&l.length)return(0,s.jsx)(r.a,{style:{height:500},flex:{direction:"column"},children:(0,s.jsx)(p.S,{events:l})});let m=(null==i?void 0:i.instigationStateOrError.__typename)==="InstigationState"?null==i?void 0:i.instigationStateOrError.tick.status:void 0,x=(null==i?void 0:i.instigationStateOrError.__typename)==="InstigationState"?null==i?void 0:i.instigationStateOrError.instigationType:void 0,g="SENSOR"===x?"https://docs.dagster.io/concepts/partitions-schedules-sensors/sensors#logging-in-sensors":"SCHEDULE"===x?"https://docs.dagster.io/concepts/partitions-schedules-sensors/schedules#logging-in-schedules":void 0;return(0,s.jsx)(r.a,{style:{height:500},flex:{justifyContent:"center",alignItems:"center"},padding:{vertical:48},children:(0,s.jsx)(u.I,{icon:"no-results",title:"No logs to display",description:(0,s.jsxs)(r.a,{flex:{direction:"column",gap:12},children:[(0,s.jsx)("div",{children:"Your evaluation did not emit any logs. To learn how to emit logs in your evaluation, visit the documentation for more information."}),"FAILURE"===m&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{children:"For failed evaluations, logs will only be displayed if your Dagster and Dagster Cloud agent versions 1.5.14 or higher."}),(0,s.jsx)("div",{children:"Upgrade your Dagster versions to view logs for failed evaluations."})]})]}),action:g&&(0,s.jsx)(a.ru,{href:g,rightIcon:(0,s.jsx)(d.In,{name:"open_in_new"}),children:"View documentation"})})})},f=(0,h.J1)(x(),p.p)},43178:(e,n,t)=>{t.r(n),t.d(n,{RunRoot:()=>eB,default:()=>eY});var i=t(9329),s=t(6029),o=t(34419),r=t(71802),l=t(30424),a=t(12547),c=t(97962),u=t(67221),d=t(36660),p=t(42572),h=t(55729),m=t(3102),x=t(38584),g=t(99649),y=t(93096),f=t(9672),j=t(27589),v=t(9448),I=t(27355),S=t(41735),k=t(35166),w=t(89181),C=t(74302),b=t(10300),R=t(70751),E=t(86511),_=t(80306),T=t(86218),O=t(78224),F=t(31158),N=t(54423),D=t(65056),L=t(29492),$=t(94251),K=t(20881),P=t(80300),A=t(53231),M=t(6579),J=t(46363),U=t(89337);let q=(0,h.memo)(e=>{let{run:n,runId:t}=e,[i,o]=(0,U.BJ)(),[r,l]=(0,P.m)({queryKey:"selection",defaults:{selection:""}});(e=>{(0,h.useEffect)(()=>{let n=document.querySelector('link[rel="icon"][type="image/svg+xml"]');if(!n)return;let t=n.getAttribute("href");return n.setAttribute("href",e),()=>{t&&n.setAttribute("href",t)}},[e])})(n?(e=>{switch(e){case $.i2_.FAILURE:return"/favicon-run-failed.svg";case $.i2_.SUCCESS:return"/favicon-run-success.svg";case $.i2_.STARTING:case $.i2_.STARTED:case $.i2_.CANCELING:return"/favicon-run-pending.svg";default:return"/favicon.svg"}})(n.status):"/favicon.svg"),(0,K.r)(n?"".concat(!(0,N.$D)(n.pipelineName)?n.pipelineName:""," ").concat(t.slice(0,8)," [").concat(n.status,"]"):"Run: ".concat(t));let a=(e,n)=>{let t=n.find(n=>"ExecutionStepFailureEvent"===n.__typename&&n.stepKey===e);t&&(0,O.v)({body:(0,s.jsx)(F.Bf,{error:t})})},c=e=>{l(e),o((0,y._)((0,g._)({},i),{logQuery:"*"!==e?[{token:"query",value:e}]:[]}))},u=(0,A.ac)("RunLogs");return(0,s.jsx)(E.Z.Provider,{value:n,children:(0,s.jsx)(w.h,{runId:t,children:e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Q,{dependency:u,logs:e}),(0,s.jsx)(_.yB,{logs:e,children:l=>(0,s.jsx)(V,{run:n,runId:t,logs:e,logsFilter:i,metadata:l,selectionQuery:r,onSetLogsFilter:o,onSetSelectionQuery:c,onShowStateDetails:a})})]})},t)})}),Q=e=>{let{dependency:n,logs:t}=e;return(0,h.useLayoutEffect)(()=>{t.loading||n.completeDependency(A.$C.SUCCESS)},[n,t]),null},V=e=>{let{run:n,runId:t,logs:i,logsFilter:r,metadata:l,selectionQuery:u,onSetLogsFilter:d,onSetSelectionQuery:p}=e,[m,g]=(0,P.m)({queryKey:"logType",defaults:{logType:b.FY.structured}}),y=(e=>{switch(e){case"stdout":return b.FY.stdout;case"stderr":return b.FY.stderr;default:return b.FY.structured}})(m),[S,w]=(0,h.useState)(null),E=JSON.stringify(Object.keys(l.steps).sort()),_=(0,h.useMemo)(()=>JSON.parse(E),[E]),O=(null==n?void 0:n.executionPlan)&&(0,L.Q)(null==n?void 0:n.executionPlan,l.steps),F=(0,h.useMemo)(()=>O&&u&&"*"!==u?(0,M.d)(O,u).all.map(e=>e.name):[],[O,u]),N=(0,h.useMemo)(()=>({query:u,keys:F}),[F,u]),{logCaptureInfo:$,computeLogFileKey:K,setComputeLogFileKey:A}=(0,J.B)({stepKeys:_,selectionStepKeys:F,metadata:l,defaultToFirstStep:!1}),U=(0,h.useMemo)(()=>O?r.logQuery.filter(e=>e.token&&"query"===e.token).reduce((e,n)=>(e.push(...(0,M.d)(O,n.value).all.map(e=>e.name)),e),[]):[],[r.logQuery,O]),q=(e,n)=>{let t=F.indexOf(e),i=u;if(n.shiftKey){var s,o,r,a;i=-1!==t?(s=i,o=e,"(".concat(s,') and not name:"').concat(o,'"')):(r=i,a=e,"(".concat(r,') or name:"').concat(a,'"'))}else if(1===F.length&&-1!==t)i="";else{i='name:"'.concat(e,'"');let n=(0,J.j)(l.logCaptureSteps,e);n&&A(n)}p(i)},[Q,V]=(0,h.useState)(null),Y=(0,h.useRef)(null);(0,h.useLayoutEffect)(()=>{if(Y.current){let e=Y.current.getSize();100===e?V("top"):0===e&&V("bottom")}},[]);let W="top"===Q,G="bottom"===Q,X=()=>{var e;null==(e=Y.current)||e.changeSize(100),V("top")},H=()=>{var e;null==(e=Y.current)||e.changeSize(50),V(null)};return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(I.c,{ref:Y,axis:"vertical",identifier:"run-gantt",firstInitialPercent:35,firstMinSize:56,first:(e=>n?n.executionPlan&&O?(0,s.jsx)(f.t,{region:"gantt chart",children:(0,s.jsx)(D.T8,{options:{mode:D.O8.WATERFALL_TIMED},toolbarActions:(0,s.jsxs)(o.a,{flex:{direction:"row",alignItems:"center",gap:12},children:[(0,s.jsx)(j.m,{content:W?"Collapse":"Expand",children:(0,s.jsx)(v.$n,{icon:(0,s.jsx)(c.In,{name:W?"collapse_arrows":"expand_arrows"}),onClick:W?H:X})}),(0,s.jsx)(R.Jo,{run:n,graph:O,metadata:e,selection:N})]}),runId:t,graph:O,metadata:e,selection:N,onClickStep:q,onSetSelection:p,focusedTime:r.focusedTime})}):(0,s.jsx)(a.I,{icon:"error",title:"Unable to build execution plan"}):(0,s.jsx)(D.K3,{runId:t}))(l),secondMinSize:56,second:(0,s.jsx)(f.t,{region:"logs",children:(0,s.jsxs)(z,{children:[(0,s.jsx)(b.B_,{logType:y,onSetLogType:e=>g(b.FY[e]),filter:r,onSetFilter:d,steps:_,metadata:l,computeLogFileKey:K,onSetComputeLogKey:A,computeLogUrl:S,counts:i.counts,isSectionExpanded:G,toggleExpanded:G?H:()=>{var e;null==(e=Y.current)||e.changeSize(0),V("bottom")}}),(null==n?void 0:n.status)==="QUEUED"?(0,s.jsx)(a.I,{icon:"arrow_forward",title:"Run queued",description:"This run is queued for execution and will start soon.",action:(0,s.jsx)(x.N_,{to:(0,T.J$)([{token:"status",value:"QUEUED"}]),children:"View queued runs"})}):y===b.FY.structured?(0,s.jsx)(C.l,{logs:i,filter:r,filterStepKeys:U,filterKey:"".concat(JSON.stringify(r)),metadata:l}):K?(0,s.jsx)(k.r,{logKey:K?[t,"compute_logs",K]:[],logCaptureInfo:$,visibleIOType:b.FY[y],onSetDownloadUrl:w}):(0,s.jsx)(B,{type:y})]})})})})},z=S.Ay.div.withConfig({componentId:"sc-bb581f4d-0"})(["display:flex;flex-direction:column;height:100%;"]),B=e=>{let{type:n}=e;return(0,s.jsx)(o.a,{flex:{direction:"row",grow:1,alignItems:"center",justifyContent:"center"},style:{background:d.Tr()},children:(0,s.jsx)(a.I,{title:"Select a step to view ".concat(n),icon:"warning",description:"Select a step on the Gantt chart or from the dropdown above to view logs."})})};var Y=t(16370),W=t(98784);function G(){let e=(0,i._)(["\n  query RunAssetChecksQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        assetChecks {\n          name\n          assetKey {\n            path\n          }\n        }\n      }\n    }\n  }\n"]);return G=function(){return e},e}let X=e=>{let{run:n}=e,t=(0,N.$D)(n.pipelineName),{data:i,loading:o}=(0,W.IT)(H,{variables:{runId:n.id},skip:t});if(o||!i||"Run"!==i.pipelineRunOrError.__typename)return null;let r=t?n.assetCheckSelection:i.pipelineRunOrError.assetChecks;return(0,s.jsx)(Y.vE,{assetChecks:r})},H=(0,W.J1)(G());var Z=t(85521);function ee(){let e=(0,i._)(["\n  query RunAssetsQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        assets {\n          id\n          key {\n            path\n          }\n        }\n      }\n    }\n  }\n"]);return ee=function(){return e},e}let en=e=>{let{run:n}=e,t=(0,N.$D)(n.pipelineName),i=(0,W.IT)(et,{variables:{runId:n.id},skip:t,fetchPolicy:"no-cache"}),o=(0,h.useMemo)(()=>{let{data:e}=i,s=null;return(null==e?void 0:e.pipelineRunOrError.__typename)==="Run"&&(s=e.pipelineRunOrError.assets.map(e=>e.key)),t?(0,Z.rs)(n):s},[i,n,t]);return(0,s.jsx)(Y.II,{useTags:!0,assetKeys:o})},et=(0,W.J1)(ee());var ei=t(81310),es=t(82343),eo=t(98689),er=t(43852);let el=e=>null;var ea=t(44242),ec=t(58881),eu=t(38569),ed=t(54996),ep=t(74016),eh=t(21504);let em=e=>{let{isOpen:n,onClose:t,pools:i}=e;return(0,s.jsxs)(ep.lG,{isOpen:n,onClose:t,canOutsideClickClose:!0,canEscapeKeyClose:!0,title:"Pools",children:[(0,s.jsx)(o.a,{margin:{horizontal:24,vertical:12},flex:{gap:12},children:i.map(e=>(0,s.jsx)(eh.f,{pool:e},e))}),(0,s.jsx)(ep.Es,{topBorder:!0,children:(0,s.jsx)(v.$n,{onClick:t,intent:"primary",children:"Close"})})]})};var ex=t(46984),eg=t(62380),ey=t(74644),ef=t(12988),ej=t(90713),ev=t(45313),eI=t(44228),eS=t(1536);let ek=e=>{var n,t;let{run:i,isJob:r}=e,l=i.hasRunMetricsEnabled,[a,u]=(0,h.useState)(null),{rootServerURI:d}=(0,h.useContext)(ef.B),{refetch:p}=(0,h.useContext)(Z.rw),x=(0,m.W6)(),[g]=(0,W.n_)(ev.bV),y=async()=>{var e;(null==(e=(await g({variables:{runId:i.id}})).data)?void 0:e.freeConcurrencySlots)&&await (0,ej.l)({intent:"success",icon:"check_circle",message:"Freed concurrency slots"})},f=(0,eS.u2)({repositoryName:null==(n=i.repositoryOrigin)?void 0:n.repositoryName,repositoryLocationName:null==(t=i.repositoryOrigin)?void 0:t.repositoryLocationName,run:i,isJob:r});return(0,s.jsxs)("div",{children:[(0,s.jsxs)(o.a,{flex:{direction:"row",gap:8},children:[(0,s.jsx)(el,{runId:i.id}),f.disabledReason?(0,s.jsx)(j.m,{content:f.disabledReason,children:(0,s.jsx)(v.$n,{icon:(0,s.jsx)(c.In,{name:f.icon}),disabled:!0,children:f.label})}):(0,s.jsx)(eI.A,{icon:(0,s.jsx)(c.In,{name:f.icon}),to:f.to,children:f.label}),(0,s.jsx)(v.$n,{icon:(0,s.jsx)(c.In,{name:"tag"}),onClick:()=>u("config"),children:"View tags and config"}),i.allPools&&i.allPools.length?(0,s.jsx)(j.m,{content:"View pools",position:"top",children:(0,s.jsx)(v.$n,{icon:(0,s.jsx)(c.In,{name:"concurrency"}),onClick:()=>u("pools")})}):null,!(0,ey.d)(i)||i.hasDeletePermission?(0,s.jsx)(es.AM,{position:"bottom-right",content:(0,s.jsxs)(eo.W1,{children:[(0,ey.d)(i)?null:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(er.T,{run:i}),(0,s.jsx)(j.m,{content:"Loadable in dagster-webserver-debug",position:"left",children:(0,s.jsx)(eo.Dr,{text:"Download debug file",icon:"download_for_offline",onClick:()=>window.open("".concat(d,"/download_debug/").concat(i.id))})}),i.status===$.i2_.QUEUED?(0,s.jsx)(eo.Dr,{icon:"history_toggle_off",text:"View queue criteria",intent:"none",onClick:()=>u("queue-criteria")}):null,l&&ea.X?(0,s.jsx)(eo.Dr,{icon:"asset_plot",text:"View container metrics",intent:"none",onClick:()=>u("metrics")}):null,i.hasConcurrencyKeySlots&&ex.RD.has(i.status)?(0,s.jsx)(eo.Dr,{text:"Free concurrency slots",icon:"lock",onClick:y}):null]}),i.hasDeletePermission?(0,s.jsx)(eo.Dr,{icon:"delete",text:"Delete",intent:"danger",onClick:()=>u("delete")}):null]}),children:(0,s.jsx)(v.$n,{icon:(0,s.jsx)(c.In,{name:"expand_more"})})}):null]}),(0,s.jsx)(ed.M,{isOpen:"config"===a,onClose:()=>u(null),mode:i.mode,runConfigYaml:i.runConfigYaml,tags:i.tags,isJob:r}),i.status===$.i2_.QUEUED?(0,s.jsx)(eu.w,{run:i,isOpen:"queue-criteria"===a,onClose:()=>u(null)}):null,l&&ea.X?(0,s.jsx)(ea.X,{runId:i.id,isOpen:"metrics"===a,onClose:()=>u(null)}):null,i.hasDeletePermission?(0,s.jsx)(ec.J,{isOpen:"delete"===a,onClose:()=>u(null),onComplete:()=>{i.repositoryOrigin?x.push((0,eS.HU)({repoName:i.repositoryOrigin.repositoryName,repoLocation:i.repositoryOrigin.repositoryLocationName,pipelineName:i.pipelineName,isJob:r,path:"/runs"})):u(null)},onTerminateInstead:()=>u("terminate"),selectedRuns:{[i.id]:i.canTerminate}}):null,i.hasTerminatePermission?(0,s.jsx)(eg.B,{isOpen:"terminate"===a,onClose:()=>u(null),onComplete:()=>{p()},selectedRuns:{[i.id]:i.canTerminate}}):null,i.allPools&&i.allPools.length?(0,s.jsx)(em,{isOpen:"pools"===a,pools:i.allPools,onClose:()=>u(null)}):null]})};var ew=t(14064),eC=t(95510),eb=t(75310),eR=t(8131),eE=t(36561);let e_=e=>{let{loading:n,run:t}=e;return(0,s.jsxs)(s.Fragment,{children:[(null==t?void 0:t.startTime)?(0,s.jsx)(es.AM,{interactionKind:"hover",placement:"bottom",content:(0,s.jsx)(o.a,{padding:16,children:(0,s.jsx)(eb.MC,{run:t,loading:n})}),children:(0,s.jsx)(l.v,{icon:"schedule",children:(0,s.jsx)(eE.J,{timestamp:t.startTime,timeFormat:{showSeconds:!0,showTimezone:!1}})})}):t.updateTime?(0,s.jsx)(l.v,{icon:"schedule",children:(0,s.jsx)(eE.J,{timestamp:t.updateTime,timeFormat:{showSeconds:!0,showTimezone:!1}})}):void 0,(null==t?void 0:t.startTime)&&(null==t?void 0:t.endTime)?(0,s.jsx)(es.AM,{interactionKind:"hover",placement:"bottom",content:(0,s.jsx)(o.a,{padding:16,children:(0,s.jsx)(eb.MC,{run:t,loading:n})}),children:(0,s.jsx)(l.v,{icon:"timer",children:(0,s.jsx)("span",{style:{fontVariantNumeric:"tabular-nums"},children:(null==t?void 0:t.startTime)?(0,eR.bz)(((null==t?void 0:t.endTime)*1e3||Date.now())-(null==t?void 0:t.startTime)*1e3):"–"})})}):null]})};var eT=t(65096),eO=t(24372),eF=t(85791),eN=t(8186),eD=t(85058),eL=t(98590);let e$=e=>{let{instigationSelector:n,instigationType:t,tickId:i}=e,[r,a]=(0,h.useState)(!1),[c,u]=(0,h.useState)(!1),d=t===eC.d.ScheduleName?"schedule":"sensors",{name:p,repositoryName:m,repositoryLocationName:x}=n,g=(0,eL.t8)(m,x),y=[{label:"View ".concat(t===eC.d.ScheduleName?"schedule":"sensor"),to:(0,eS.HG)(g,"".concat(t===eC.d.ScheduleName?"/schedules":"/sensors","/").concat(p))},{label:"View tick details",onClick:()=>a(!0)},{label:"View tick logs",onClick:()=>u(!0)}];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eD.l,{actions:y,data:{key:"Launched by",value:p},children:(0,s.jsx)(l.v,{icon:d,children:(0,s.jsxs)(o.a,{flex:{direction:"row"},children:[(0,s.jsx)("span",{children:"Launched by\xa0"}),(0,s.jsx)("div",{style:{maxWidth:"140px"},children:(0,s.jsx)(eO.A,{text:p})})]})})}),(0,s.jsx)(eF.M,{isOpen:r,tickResultType:"runs",onClose:()=>a(!1),instigationSelector:n,tickId:i}),(0,s.jsx)(eN._,{isOpen:c,onClose:()=>u(!1),instigationSelector:n,tickId:i})]})};var eK=t(10570),eP=t(85184),eA=t(31298),eM=t(69849);let eJ=new Intl.Collator(navigator.language,{sensitivity:"base"}),eU=e=>{var n,t;let{assetKeys:i,evaluationId:r}=e,[a,u]=(0,h.useState)(null),d=(0,h.useMemo)(()=>[...i].sort((e,n)=>eJ.compare(e.path.join("/"),n.path.join("/"))),[i]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(es.AM,{placement:"bottom",content:(0,s.jsxs)("div",{style:{width:"400px"},children:[(0,s.jsx)(o.a,{padding:{vertical:8,horizontal:12},border:"bottom",style:{fontWeight:600},children:"Automation condition"}),(0,s.jsx)(o.a,{flex:{direction:"column",gap:16},padding:{vertical:12},style:{maxHeight:"220px",overflowY:"auto"},children:d.map(e=>{let n=(0,eM.Q)(e,{view:"automation",evaluation:r});return(0,s.jsxs)(o.a,{padding:{vertical:8,left:12,right:16},flex:{direction:"row",justifyContent:"space-between",alignItems:"center",gap:16},style:{overflow:"hidden"},children:[(0,s.jsxs)(o.a,{flex:{direction:"row",alignItems:"center",gap:8},style:{overflow:"hidden"},children:[(0,s.jsx)(c.In,{name:"asset"}),(0,s.jsx)(eO.A,{text:e.path.join("/")})]}),(0,s.jsx)(eP.v,{onClick:()=>u({assetKeyPath:e.path,evaluationId:r}),style:{whiteSpace:"nowrap"},children:"View evaluation"})]},n)})})]}),interactionKind:"hover",children:(0,s.jsx)(l.v,{icon:"automation_condition",children:"Automation condition"})}),(0,s.jsx)(eA.Y,{assetKeyPath:null!=(n=null==a?void 0:a.assetKeyPath)?n:[],isOpen:!!a,onClose:()=>u(null),evaluationID:null!=(t=null==a?void 0:a.evaluationId)?t:""})]})};var eq=t(56271),eQ=t(59447),eV=t(55645);function ez(){let e=(0,i._)(["\n  query RunRootQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        ...RunPageFragment\n      }\n    }\n  }\n\n  ","\n"]);return ez=function(){return e},e}let eB=()=>{var e;(0,eK.b7)();let{runId:n}=(0,m.g)();(0,K.r)(n?"Run ".concat(n.slice(0,8)):"Run");let{data:t,loading:i}=(0,W.IT)(eG,{variables:{runId:n}}),a=(null==t?void 0:t.pipelineRunOrError.__typename)==="Run"?t.pipelineRunOrError:null,c=null==a?void 0:a.pipelineSnapshotId,u=(0,eV.A)(a),d=(null==u?void 0:u.match)?(0,eL.t8)(u.match.repository.name,u.match.repositoryLocation.name):null,p=(0,h.useMemo)(()=>!!(a&&u&&(0,eQ.Ji)(u.match,a.pipelineName)),[a,u]),x=(0,h.useMemo)(()=>(null==a?void 0:a.tags.find(e=>e.key===eC.d.AssetEvaluationID))||null,[a]),g=(0,h.useMemo)(()=>{if(d){let e=(null==a?void 0:a.tags)||[],n=e.find(e=>e.key===eC.d.TickId);if(n){let t=e.find(e=>e.key===eC.d.ScheduleName||e.key===eC.d.SensorName);if(t){let e={name:t.value,repositoryName:d.name,repositoryLocationName:d.location};return{tickId:n.value,instigationType:t.key,instigationSelector:e}}}}return null},[a,d]),y=null==a?void 0:a.tags.find(e=>e.key===eC.d.Partition);return(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0,width:"100%",height:"100%",overflow:"hidden"},children:[(0,s.jsx)(o.a,{flex:{direction:"row",alignItems:"flex-start"},style:{position:"relative",zIndex:1},children:(0,s.jsx)(r.z,{title:(0,s.jsx)(eX,{run:a,runId:n}),tags:a?(0,s.jsxs)(o.a,{flex:{direction:"row",alignItems:"flex-start",gap:12,wrap:"wrap"},children:[(0,s.jsx)(ew.eq,{status:a.status}),(0,N.$D)(a.pipelineName)?null:(0,s.jsxs)(l.v,{icon:"run",children:["Run of"," ",(0,s.jsx)(eq.E,{pipelineName:null==a?void 0:a.pipelineName,pipelineHrefContext:d||"repo-unknown",snapshotId:c,size:"small",isJob:p})]}),g?(0,s.jsx)(e$,{instigationSelector:g.instigationSelector,instigationType:g.instigationType,tickId:g.tickId}):null,y&&(0,s.jsx)(eC.Q,{tag:y}),(0,s.jsx)(en,{run:a}),(0,s.jsx)(X,{run:a}),(0,s.jsx)(e_,{run:a,loading:i}),x&&(null==(e=a.assetSelection)?void 0:e.length)?(0,s.jsx)(eU,{assetKeys:a.assetSelection,evaluationId:x.value}):null]}):null,right:a?(0,s.jsx)(ek,{run:a,isJob:p}):null})}),(0,s.jsx)(eW,{data:t,runId:n})]})},eY=eB,eW=e=>{let{data:n,runId:t}=e;if(!n||!n.pipelineRunOrError)return null;if("Run"!==n.pipelineRunOrError.__typename)return(0,s.jsx)(o.a,{padding:{vertical:64},children:(0,s.jsx)(a.I,{icon:"error",title:"No run found",description:"The run with this ID does not exist or has been cleaned up."})});if((0,ey.d)(n.pipelineRunOrError)){let e=(0,ey.w)(n.pipelineRunOrError);return e?(0,s.jsx)(o.a,{padding:{vertical:64},children:(0,s.jsx)(a.I,{icon:"job",title:"This run was remotely executed",description:(0,s.jsxs)(o.a,{flex:{direction:"row",alignItems:"center"},children:[(0,s.jsx)("a",{href:e,target:"_blank",rel:"noreferrer",children:"View the execution logs"}),(0,s.jsx)(c.In,{name:"open_in_new",size:16,style:{marginLeft:8}})]})})}):(0,s.jsx)(o.a,{padding:{vertical:64},children:(0,s.jsx)(a.I,{icon:"job",title:"No external URL found",description:"This run was executed externally, but does not have an external URL."})})}return(0,s.jsx)(q,{run:n.pipelineRunOrError,runId:t})},eG=(0,W.J1)(ez(),ei.Pd),eX=e=>{let{run:n,runId:t}=e,i=(0,h.useMemo)(()=>null==n?void 0:n.tags.find(e=>e.key===eC.d.Backfill),[n]);return i?(0,s.jsxs)(u.M7,{children:[(0,s.jsx)(x.N_,{to:"/runs",style:{color:d.XN()},children:"Runs"})," / ",(0,s.jsx)(x.N_,{to:(0,eT.I)(i.value,"runs"),style:{color:d.XN()},children:i.value})," / ",t.slice(0,8)]}):(0,s.jsxs)(u.M7,{style:{display:"flex",flexDirection:"row",gap:6},children:[(0,s.jsx)(x.N_,{to:"/runs",children:"Runs"}),(0,s.jsx)("span",{children:"/"}),(0,s.jsx)("span",{style:{fontFamily:p.a.monospace},children:t.slice(0,8)})]})}},45313:(e,n,t)=>{t.d(n,{Xg:()=>c,bV:()=>d,kb:()=>u,sP:()=>p});var i=t(9329),s=t(98784);function o(){let e=(0,i._)(["\n  mutation SetConcurrencyLimit($concurrencyKey: String!, $limit: Int!) {\n    setConcurrencyLimit(concurrencyKey: $concurrencyKey, limit: $limit)\n  }\n"]);return o=function(){return e},e}function r(){let e=(0,i._)(["\n  mutation DeleteConcurrencyLimit($concurrencyKey: String!) {\n    deleteConcurrencyLimit(concurrencyKey: $concurrencyKey)\n  }\n"]);return r=function(){return e},e}function l(){let e=(0,i._)(["\n  mutation FreeConcurrencySlots($runId: String!, $stepKey: String) {\n    freeConcurrencySlots(runId: $runId, stepKey: $stepKey)\n  }\n"]);return l=function(){return e},e}function a(){let e=(0,i._)(["\n  query RunsForConcurrencyKeyQuery($filter: RunsFilter, $limit: Int) {\n    pipelineRunsOrError(filter: $filter, limit: $limit) {\n      ... on Runs {\n        results {\n          id\n          status\n        }\n      }\n    }\n  }\n"]);return a=function(){return e},e}let c=(0,s.J1)(o()),u=(0,s.J1)(r()),d=(0,s.J1)(l()),p=(0,s.J1)(a())},70751:(e,n,t)=>{t.d(n,{Jo:()=>E,gX:()=>R,yG:()=>b});var i=t(99649),s=t(93096),o=t(6029),r=t(9448),l=t(97962),a=t(34419),c=t(55729),u=t(80306),d=t(46984),p=t(95510),h=t(85521),m=t(62380),x=t(55090),g=t(49208),y=t(90713),f=t(88742),j=t(58342),v=t(94251),I=t(36040),S=t(6579),k=t(55645);let w=e=>{let{run:n}=e,{id:t,canTerminate:i}=n,[s,a]=(0,c.useState)(!1),u=(0,c.useCallback)(()=>a(!1),[]),d=(0,c.useCallback)(async e=>{let{errors:n}=e,i=t&&n[t];i&&"message"in i&&await (0,y.l)({message:i.message,icon:"error",intent:"danger"})},[t]);return t?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.$n,{icon:(0,o.jsx)(l.In,{name:"cancel"}),intent:"danger",disabled:s,onClick:()=>a(!0),children:"Terminate"}),(0,o.jsx)(m.B,{isOpen:s,onClose:u,onComplete:d,selectedRuns:{[t]:i}})]}):null};function C(e,n){let t=e.keys.map(e=>{var t;return e&&(null==(t=n.steps[e])?void 0:t.state)||u.VB.PREPARING});return(0,s._)((0,i._)({},e),{present:e.keys.length>0,failed:e.keys.length&&t.includes(u.VB.FAILED),finished:t.every(e=>[u.VB.FAILED,u.VB.SUCCEEDED].includes(e))})}let b=e=>d.RD.has(e.status),R=e=>e.executionPlan&&d.ev.has(e.status),E=e=>{var n,t,i;let{metadata:s,graph:r,run:l}=e,c=(0,k.A)(l),u=(0,x.o)(l),m=null==l||null==(n=l.executionPlan)?void 0:n.artifactsPersisted,y=C(e.selection,s),E=function(e,n,t){let i=e.tags.find(e=>e.key===p.d.StepSelection);return i?C({keys:(0,f.Q)(n,i.value).all.map(e=>e.name),query:i.value},t):null}(l,r,s),T=null==(t=l.tags)?void 0:t.some(e=>e.key===p.d.IsResumeRetry&&"true"===e.value),O=(0,g.Q)(),F=async e=>{if(!l||!c||!l.pipelineSnapshotId)return;let n=(0,h.Pl)({run:l,selection:e,repositoryLocationName:c.match.repositoryLocation.name,repositoryName:c.match.repository.name});await O.onClick(l,n,!1)},N={icon:"cached",scope:"*",title:"All steps in root run",tooltip:"Re-execute the pipeline run from scratch. Shift-click to adjust tags.",disabled:!b(l),onClick:e=>O.onClick(l,v.Fnt.ALL_STEPS,e.shiftKey)},D={icon:"linear_scale",scope:(null==E?void 0:E.query)||"*",title:"Same steps",disabled:!E||!(E.finished||E.failed),tooltip:(0,o.jsxs)("div",{children:[E&&E.present?E.finished?"Re-execute the same step subset used for this run:":"Wait for all of the steps to finish to re-execute the same subset.":"Re-executes the same step subset used for this run if one was present.",(0,o.jsx)(_,{selection:E})]}),onClick:()=>F(E)},L={icon:"op",scope:y.query,title:y.keys.length>1?"Selected steps":"Selected step",disabled:!y.present||!(y.finished||y.failed),tooltip:(0,o.jsxs)("div",{children:[y.present?y.finished?"Re-execute the selected steps with existing configuration:":"Wait for the steps to finish to re-execute them.":"Select a step or type a step subset to re-execute.",(0,o.jsx)(_,{selection:y})]}),onClick:()=>F(y)},$={icon:"arrow_forward",title:"From selected",disabled:!b(l)||1!==y.keys.length,tooltip:"Re-execute the pipeline downstream from the selected steps.",onClick:async()=>{if(!l.executionPlan)return console.warn("Run execution plan must be present to launch from-selected execution"),Promise.resolve();let e=y.keys.map(e=>"".concat(e,"*")).join(","),n=y.keys.map(e=>'name:"'.concat(e,'"+')).join(" or "),t=(0,S.d)(r,n).all.map(e=>e.name);await F({keys:t,query:e})}},K=R(l),P={icon:"arrow_forward",title:"From failure",disabled:!K,tooltip:K?"Retry the pipeline run, skipping steps that completed successfully. Shift-click to adjust tags.":"Retry is only enabled when the pipeline has failed.",onClick:e=>O.onClick(l,v.Fnt.FROM_FAILURE,e.shiftKey)};m||[L,D,P,$].forEach(e=>{e.disabled=!0,e.title="Retry and re-execute are only enabled on persistent storage. Try rerunning with a different storage configuration."});let A=[N,D,L,$,P,(null==(i=l.executionPlan)?void 0:i.assetKeys.length)?{icon:"arrow_forward",title:"From asset failure",disabled:!K,tooltip:K?"Retry the pipeline run, selecting only assets that did not complete successfully. Shift-click to adjust tags.":"Retry is only enabled when the pipeline has failed.",onClick:e=>O.onClick(l,v.Fnt.FROM_ASSET_FAILURE,e.shiftKey)}:null].filter(Boolean),M=y.present?L:K&&T?P:(null==E?void 0:E.present)?D:null,J=m&&M?M:N;return(0,o.jsxs)(a.a,{flex:{direction:"row",gap:8},children:[(0,o.jsx)(a.a,{flex:{direction:"row"},children:(0,o.jsx)(I.x,{runCount:1,primary:J,options:A,title:"*"===J.scope?"Re-execute all (*)":J.scope?"Re-execute (".concat(J.scope,")"):"Re-execute ".concat(J.title),tooltip:(null==u?void 0:u.tooltip)?null==u?void 0:u.tooltip:l.hasReExecutePermission?void 0:j.gZ,icon:null==u?void 0:u.icon,disabled:(null==u?void 0:u.disabled)||!l.hasReExecutePermission})}),d.RD.has(l.status)?null:(0,o.jsx)(w,{run:l}),O.launchpadElement]})},_=e=>{let{selection:n}=e;return(0,o.jsx)("div",{style:{paddingLeft:"10px"},children:((null==n?void 0:n.keys)||[]).map(e=>(0,o.jsx)("span",{style:{display:"block"},children:"* ".concat(e)},e))})}}}]);
//# sourceMappingURL=178.4b57de1745a94dad.js.map