"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[143],{8186:(e,t,n)=>{n.d(t,{_:()=>g});var s=n(9329),r=n(6029),i=n(74016),o=n(34419),a=n(36660),l=n(9448),d=n(62978),c=n(12547),u=n(97962),h=n(32228),m=n(98784),p=n(36561);function x(){let e=(0,s._)(["\n  query TickLogEventsQuery($instigationSelector: InstigationSelector!, $tickId: ID!) {\n    instigationStateOrError(instigationSelector: $instigationSelector) {\n      ... on InstigationState {\n        id\n        instigationType\n        tick(tickId: $tickId) {\n          id\n          status\n          timestamp\n          logEvents {\n            events {\n              ...InstigationEventLog\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return x=function(){return e},e}let g=e=>{let{tickId:t,timestamp:n,instigationSelector:s,isOpen:d,onClose:c}=e;return(0,r.jsxs)(i.lG,{isOpen:d,onClose:c,style:{width:"70vw",maxWidth:"1200px",minWidth:"800px"},title:(0,r.jsx)("span",{children:n?(0,r.jsxs)("span",{children:[(0,r.jsxs)("span",{children:["Logs for ",s.name,": "]}),(0,r.jsx)(p.J,{timestamp:n,timeFormat:{showSeconds:!0}})]}):(0,r.jsxs)("span",{children:["Logs for ",s.name]})}),children:[t?(0,r.jsx)(j,{instigationSelector:s,tickId:t}):null,(0,r.jsx)(o.a,{background:a.Tr(),style:{zIndex:3,position:"relative"},children:(0,r.jsx)(i.Es,{topBorder:!0,children:(0,r.jsx)(l.$n,{onClick:c,children:"Done"})})})]})},j=e=>{let{instigationSelector:t,tickId:n}=e,{data:s,loading:i}=(0,m.IT)(v,{variables:{instigationSelector:t,tickId:n},notifyOnNetworkStatusChange:!0}),a=(null==s?void 0:s.instigationStateOrError.__typename)==="InstigationState"&&(null==s?void 0:s.instigationStateOrError.tick)?null==s?void 0:s.instigationStateOrError.tick.logEvents.events:void 0;if(i)return(0,r.jsx)(o.a,{style:{height:500},flex:{justifyContent:"center",alignItems:"center"},children:(0,r.jsx)(d.V,{label:"Loading logs…"})});if(a&&a.length)return(0,r.jsx)(o.a,{style:{height:500},flex:{direction:"column"},children:(0,r.jsx)(h.S,{events:a})});let p=(null==s?void 0:s.instigationStateOrError.__typename)==="InstigationState"?null==s?void 0:s.instigationStateOrError.tick.status:void 0,x=(null==s?void 0:s.instigationStateOrError.__typename)==="InstigationState"?null==s?void 0:s.instigationStateOrError.instigationType:void 0,g="SENSOR"===x?"https://docs.dagster.io/concepts/partitions-schedules-sensors/sensors#logging-in-sensors":"SCHEDULE"===x?"https://docs.dagster.io/concepts/partitions-schedules-sensors/schedules#logging-in-schedules":void 0;return(0,r.jsx)(o.a,{style:{height:500},flex:{justifyContent:"center",alignItems:"center"},padding:{vertical:48},children:(0,r.jsx)(c.I,{icon:"no-results",title:"No logs to display",description:(0,r.jsxs)(o.a,{flex:{direction:"column",gap:12},children:[(0,r.jsx)("div",{children:"Your evaluation did not emit any logs. To learn how to emit logs in your evaluation, visit the documentation for more information."}),"FAILURE"===p&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:"For failed evaluations, logs will only be displayed if your Dagster and Dagster Cloud agent versions 1.5.14 or higher."}),(0,r.jsx)("div",{children:"Upgrade your Dagster versions to view logs for failed evaluations."})]})]}),action:g&&(0,r.jsx)(l.ru,{href:g,rightIcon:(0,r.jsx)(u.In,{name:"open_in_new"}),children:"View documentation"})})})},v=(0,m.J1)(x(),h.p)},12023:(e,t,n)=>{n.d(t,{k:()=>l});var s=n(9329),r=n(98784),i=n(91374),o=n(26685);function a(){let e=(0,s._)(["\n  query ScheduleAssetSelectionQuery($scheduleSelector: ScheduleSelector!) {\n    scheduleOrError(scheduleSelector: $scheduleSelector) {\n      ... on Schedule {\n        id\n        assetSelection {\n          ...AutomationAssetSelectionFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return a=function(){return e},e}let l=(0,r.J1)(a(),o.b,i.z)},13365:(e,t,n)=>{n.d(t,{Y:()=>s});let s=n(41735).Ay.div.withConfig({componentId:"sc-2cf5acf-0"})(["height:100%;overflow-y:auto;padding-bottom:64px;width:100%;"])},19366:(e,t,n)=>{n.d(t,{O:()=>g});var s=n(6029),r=n(30424),i=n(16753),o=n(36660),a=n(27589),l=n(34419),d=n(85184),c=n(91991),u=n(74016),h=n(9448),m=n(55729),p=n(31158),x=n(94251);let g=e=>{let{tick:t,tickResultType:n,isStuckStarted:g}=e,[j,v]=(0,m.useState)(!1),y=(0,m.useMemo)(()=>{let e="materializations"===n?"materialization":"run";switch(t.status){case x.lsI.STARTED:return(0,s.jsx)(r.v,{intent:"primary",icon:g?void 0:"spinner",children:g?"In progress":"Evaluating"});case x.lsI.SKIPPED:let u=(0,s.jsx)(i.e,{fillColor:o.HU(),label:"materializations"===n?"0 materializations requested":"0 runs requested"});if("runKeys"in t&&t.runKeys.length){let e="".concat(t.runKeys.length," runs requested, but skipped because the runs already exist for the requested keys.");return(0,s.jsx)(a.m,{position:"right",content:e,children:u})}if("skipReason"in t&&t.skipReason)return(0,s.jsx)(a.m,{position:"right",content:t.skipReason,children:u});return u;case x.lsI.FAILURE:return(0,s.jsxs)(l.a,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,s.jsx)(r.v,{intent:"danger",children:"Failure"}),t.error?(0,s.jsx)(d.v,{onClick:()=>{v(!0)},children:"View"}):null]});case x.lsI.SUCCESS:let h="materializations"===n?t.requestedAssetMaterializationCount:t.runIds.length,m=(0,s.jsxs)(r.v,{intent:"success",children:[h," ",e,(0,c.i)(h,"","s")," requested"]});if("runKeys"in t&&t.runKeys.length>t.runIds.length){let e="".concat(t.runKeys.length," runs requested, but ").concat(t.runKeys.length-t.runIds.length," skipped because the runs already exist for those requested keys.");return(0,s.jsx)(a.m,{position:"right",content:e,children:m})}return m}},[g,t,n]);return(0,s.jsxs)(s.Fragment,{children:[y,t.error?(0,s.jsxs)(u.lG,{isOpen:j,title:"Error",style:{width:"80vw"},children:[(0,s.jsx)(u.R4,{children:(0,s.jsx)(p.Bf,{error:t.error})}),(0,s.jsx)(u.Es,{topBorder:!0,children:(0,s.jsx)(h.$n,{intent:"primary",onClick:()=>{v(!1)},children:"Close"})})]}):null]})}},26685:(e,t,n)=>{n.d(t,{b:()=>a});var s=n(9329),r=n(98784),i=n(91374);function o(){let e=(0,s._)(["\n  fragment AutomationAssetSelectionFragment on AssetSelection {\n    assetSelectionString\n    assetChecks {\n      name\n      assetKey {\n        path\n      }\n    }\n    assetsOrError {\n      ... on AssetConnection {\n        nodes {\n          id\n          ...AssetSelectionNodeFragment\n        }\n      }\n      ... on PythonError {\n        ...PythonErrorFragment\n      }\n    }\n  }\n\n  fragment AssetSelectionNodeFragment on Asset {\n    id\n    key {\n      path\n    }\n    definition {\n      id\n      automationCondition {\n        __typename\n      }\n    }\n  }\n\n  ","\n"]);return o=function(){return e},e}let a=(0,r.J1)(o(),i.z)},27674:(e,t,n)=>{n.d(t,{d:()=>f});var s=n(99649),r=n(93096),i=n(6029),o=n(36660),a=n(95527),l=n(67221),d=n(27589),c=n(91991),u=n(74312),h=n.n(u),m=n(55729),p=n(41735),x=n(91332),g=n(77418),j=n(94251);n(69852);let v={[j.lsI.SUCCESS]:o.P$(),[j.lsI.FAILURE]:o.Ld(),[j.lsI.STARTED]:o.vD(),[j.lsI.SKIPPED]:o.Wk()},y={[j.lsI.SUCCESS]:o.P7(),[j.lsI.FAILURE]:o.t6(),[j.lsI.STARTED]:o.NU(),[j.lsI.SKIPPED]:o.xC()},f=e=>{var t,n;let{ticks:o,tickResultType:c,onHoverTick:u,onSelectTick:h,exactRange:p,timeRange:j=3e5,tickGrid:v=6e4,timeAfter:y=6e4}=e,[f,T]=(0,m.useState)(Date.now()),[A,_]=(0,m.useState)(!1);(0,m.useEffect)(()=>{if(!A&&!p){let e=setInterval(()=>{T(Date.now())},100);return()=>clearInterval(e)}return()=>{}},[p,A]);let N=(null==p?void 0:p[1])?1e3*p[1]:f+y,D=(null==p?void 0:p[0])?1e3*p[0]:f-j,O=D<f&&f<N,P=N-D,{viewport:q,containerProps:F}=(0,a.k)(),M=(0,m.useMemo)(()=>o.filter(e=>!e.endTimestamp||1e3*e.endTimestamp>D).reverse(),[o,D]),$=(0,m.useMemo)(()=>M.map((e,t)=>{var n,i,o,a;let l=(n=1e3*e.timestamp,i=q.width,i*(n-D)/P),d=(o=(0,g.tU)(e,M.length-t-1)?e.timestamp:e.endTimestamp?1e3*e.endTimestamp:f,a=q.width,a*(o-D)/P);return(0,r._)((0,s._)({},e),{width:Math.max(d-l,8),startX:l})}),[D,f,M,P,q.width]),L=Math.max((N-D)/25,v)/5,z=Math.ceil(D/L)*L,U=Math.ceil((N-z)/L),K=Math.ceil(U/5),H=(0,m.useMemo)(()=>{let e=[];for(let s=0;s<U;s++){var t,n;let r=z+s*L;e.push({time:r,x:(t=r,n=q.width,n*(t-D)/P),showLabel:s%K==0})}return e},[U,z,L,q.width,D,P,K]);return(0,i.jsx)("div",{style:{marginRight:"8px"},children:(0,i.jsxs)("div",(0,r._)((0,s._)({},F),{children:[(0,i.jsxs)(w,{children:[H.map(e=>(0,i.jsxs)(I,{style:{transform:"translateX(".concat(e.x,"px)")},children:[(0,i.jsx)(b,{}),e.showLabel?(0,i.jsx)(R,{children:(0,i.jsx)(l.HL,{children:(0,i.jsx)(x.D,{timestamp:{ms:e.time},timeFormat:{showSeconds:!0}})})}):null]},e.time)),$.map(e=>{var t,n;let s=null!=(n="materializations"!==c&&"runIds"in e?null==(t=e.runIds)?void 0:t.length:e.requestedAssetMaterializationCount)?n:0;return(0,i.jsx)(C,{style:{transform:"translateX(".concat(e.startX,"px)"),width:"".concat(e.width,"px")},status:e.status,onMouseEnter:()=>{u(e),_(!0)},onMouseLeave:()=>{u(),_(!1)},onClick:()=>{h(e)},children:(0,i.jsx)(d.m,{content:(0,i.jsx)(S,{tick:e,tickResultType:c}),children:(0,i.jsx)("div",{style:{width:e.width+"px",height:"80px"},children:s>0?s:null})})},e.id)}),O?(0,i.jsx)(E,{style:{transform:"translateX(".concat((t=f,n=q.width,n*(t-D)/P),"px)")}}):null]}),(0,i.jsx)(k,{})]}))})},S=(0,m.memo)(e=>{let{tick:t,tickResultType:n}=e,s=(0,m.useMemo)(()=>{var e,s;return t.status===j.lsI.FAILURE?"Evaluation failed":t.status===j.lsI.STARTED?"Evaluating…":"materializations"!==n&&"runs"in t?"".concat((null==(e=t.runs)?void 0:e.length)||0," run").concat((0,c.i)(null==(s=t.runs)?void 0:s.length,"","s")," requested"):"".concat(t.requestedAssetMaterializationCount," materialization").concat((0,c.i)(t.requestedAssetMaterializationCount,"","s")," requested")},[t,n]),r=h()(1e3*t.timestamp),a=h()(t.endTimestamp?1e3*t.endTimestamp:Date.now()),d=r.to(a,!0);return(0,i.jsxs)("div",{children:[(0,i.jsx)(l.HL,{as:"div",children:(0,i.jsx)(x.D,{timestamp:{unix:t.timestamp},timeFormat:{showSeconds:!0}})}),(0,i.jsxs)(l.HL,{as:"div",children:[s," (",d,")"]}),t.status===j.lsI.STARTED?null:(0,i.jsx)(l.HL,{color:o.XN(),children:"Click for details"})]})}),w=p.Ay.div.withConfig({componentId:"sc-f836a7af-0"})(["position:relative;height:100px;padding:10px 2px;border-bottom:1px solid ",";"],o.KH()),k=p.Ay.div.withConfig({componentId:"sc-f836a7af-1"})(["height:24px;"]),C=p.Ay.div.withConfig({componentId:"sc-f836a7af-2"})(["cursor:pointer;position:absolute;top:10px;height:80px;will-change:transform,width;border-radius:2px;div{place-content:center;display:grid;}color:",";",""],o.Tr(),e=>{let{status:t}=e;return"\n    background: ".concat(v[t],";\n    &:hover {\n      background: ").concat(y[t],";\n    }\n  ")}),I=p.Ay.div.withConfig({componentId:"sc-f836a7af-3"})(["position:absolute;top:0;height:124px;will-change:transform;"]),b=p.Ay.div.withConfig({componentId:"sc-f836a7af-4"})(["position:absolute;top:0;height:108px;width:1px;background:",";"],o.KH()),R=p.Ay.div.withConfig({componentId:"sc-f836a7af-5"})(["height:16px;position:absolute;bottom:0;width:100px;margin-left:-24px;"]),E=p.Ay.div.withConfig({componentId:"sc-f836a7af-6"})(["position:absolute;top:0;height:126px;width:2px;background:",";&:after{content:'Now';position:absolute;left:0;background:",";color:",";bottom:0;font-size:12px;padding:3px 4px;}"],o.Gu(),o.Gu(),o.C4())},43189:(e,t,n)=>{n.d(t,{n:()=>i});var s=n(9329);function r(){let e=(0,s._)(["\n  fragment RunRequestFragment on RunRequest {\n    runConfigYaml\n    tags {\n      key\n      value\n    }\n    runKey\n    jobName\n    assetSelection {\n      path\n    }\n    assetChecks {\n      name\n      assetKey {\n        path\n      }\n    }\n  }\n"]);return r=function(){return e},e}let i=(0,n(98784).J1)(r())},49652:(e,t,n)=>{n.d(t,{r:()=>k});var s=n(6029),r=n(34419),i=n(30424),o=n(36660),a=n(74016),l=n(67221),d=n(21316),c=n(9448),u=n(85184),h=n(55729),m=n(38584),p=n(73163),x=n(53600),g=n(78224),j=n(31158),v=n(54423),y=n(69849),f=n(94251),S=n(56271),w=n(59447);let k=e=>{let{assetSelection:t,automationType:n,targets:a,repoAddress:l}=e,d=(0,w.GK)(l);if(!a&&!t)return(0,s.jsx)("span",{});let c=null==a?void 0:a.filter(e=>!(0,v.$D)(e.pipelineName));return t?(0,s.jsx)(C,{assetSelection:t,automationType:n}):(null==c?void 0:c.length)?(0,s.jsx)(r.a,{flex:{direction:"row",gap:4},children:c.map(e=>e.pipelineName?(0,s.jsx)(i.v,{icon:"job",tooltipText:e.pipelineName,children:(0,s.jsx)(S.E,{pipelineName:e.pipelineName,pipelineHrefContext:l,isJob:!!(d&&(0,w.Ji)(d,e.pipelineName))},e.pipelineName)},e.pipelineName):null)}):(0,s.jsx)(i.v,{children:(0,s.jsx)("div",{style:{color:o.XN()},children:"None"})})},C=e=>{let{assetSelection:t,automationType:n}=e,[S,w]=(0,h.useState)(!1),k="PythonError"===t.assetsOrError.__typename?t.assetsOrError:null,{checks:C,assets:I,assetsWithAMP:b,assetsWithoutAMP:R}=(0,h.useMemo)(()=>{if("PythonError"===t.assetsOrError.__typename)return{checks:[],assets:[],assetsWithAMP:[],assetsWithoutAMP:[]};let e=t.assetsOrError.nodes;return{checks:t.assetChecks.slice().sort(p.S1),assets:e.map(e=>e.key).sort(p.bf),assetsWithAMP:e.filter(e=>{var t;return!!(null==(t=e.definition)?void 0:t.automationCondition)}).map(e=>e.key).sort(p.bf),assetsWithoutAMP:e.filter(e=>{var t;return!(null==(t=e.definition)?void 0:t.automationCondition)}).map(e=>e.key).sort(p.bf)}},[t]),[E,T]=(0,h.useState)("none"),A=C.length&&!I.length?"checks":"assets";(0,h.useEffect)(()=>T(A),[A]);let _=t.assetSelectionString||"",N="all materializable assets"===_;if(0===C.length&&1===I.length&&I[0])return(0,s.jsx)(i.v,{icon:"asset",children:(0,s.jsx)(m.N_,{to:(0,y.Q)(I[0]),children:(0,v.mt)(I[0])})});if(0===I.length&&1===C.length&&C[0])return(0,s.jsx)(i.v,{icon:"asset_check",children:(0,s.jsx)(m.N_,{to:(0,y.d)(C[0]),children:(0,p.Wi)(C[0])})});let D=n===f.$Up.AUTO_MATERIALIZE||n===f.$Up.AUTOMATION;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(a.lG,{isOpen:S,title:"Targeted assets",onClose:()=>w(!1),style:{width:"750px",maxWidth:"80vw",minWidth:"500px"},canOutsideClickClose:!0,canEscapeKeyClose:!0,children:[(0,s.jsx)(r.a,{flex:{direction:"column",gap:16},padding:{horizontal:20,vertical:16},border:"bottom",children:(0,s.jsxs)(r.a,{flex:{direction:"column",gap:4},children:[(0,s.jsx)(l.Db,{children:"Asset selection"}),(0,s.jsx)(l.Kp,{children:_})]})}),(0,s.jsx)(r.a,{padding:{horizontal:20,top:8},border:"bottom",children:(0,s.jsxs)(d.tU,{size:"small",selectedTabId:E,children:[D?(0,s.jsx)(d.oz,{id:"assets",title:"Assets with Automation Conditions (".concat(b.length,")"),onClick:()=>T("assets")}):(0,s.jsx)(d.oz,{id:"assets",title:"Assets (".concat(I.length,")"),onClick:()=>T("assets")}),D&&(0,s.jsx)(d.oz,{id:"assets-without-conditions",disabled:0===R.length,title:"Other Assets (".concat(R.length,")"),onClick:()=>T("assets-without-conditions")}),(0,s.jsx)(d.oz,{id:"checks",disabled:0===C.length,title:"Checks ".concat(C.length),onClick:()=>T("checks")})]})}),(0,s.jsx)(r.a,{flex:{direction:"column"},style:{maxHeight:"60vh",minHeight:"300px"},children:"checks"===E?(0,s.jsx)(x.C,{items:C,renderItem:p.E,itemBorders:!0}):(0,s.jsx)(x.C,{items:"assets-without-conditions"===E?R:D?b:I,renderItem:p.fT,itemBorders:!0})}),(0,s.jsx)(a.Es,{topBorder:!0,children:(0,s.jsx)(c.$n,{intent:"primary",onClick:()=>{w(!1)},children:"Close"})})]}),(0,s.jsx)(i.v,{icon:1===I.length?"asset":"asset_group",intent:k?"danger":"none",children:(0,s.jsx)(u.v,{onClick:()=>{k?(0,g.v)({title:"Python error",body:(0,s.jsx)(j.Bf,{error:k})}):w(!0)},color:k?o.sq():o.Hv(),children:k?"Error loading asset selection":N?"All materializable assets":_})})]})}},58421:(e,t,n)=>{n.d(t,{I:()=>c,R:()=>d});var s=n(30118),r=n(78224),i=n(35542),o=n(6263);let a="The YAML you provided couldn't be parsed. Please fix the syntax errors and try again.",l=e=>{let{key:t,value:n}=e;return{key:t,value:n}},d=(e,t,n)=>{var d,c;if(!e)return[];let u=[];return null==e||null==(c=e.evaluationResult)||null==(d=c.runRequests)||d.forEach(e=>{var d,c,h;let m=(0,o.Y)(e.runConfigYaml);try{s.qg(m)}catch(e){(0,r.v)({title:"Invalid YAML",body:a});return}let{repositoryLocationName:p,repositoryName:x}=t,g={runConfigData:m,selector:{jobName:null!=(h=e.jobName)?h:n,repositoryLocationName:p,repositoryName:x,assetSelection:(null==(d=e.assetSelection)?void 0:d.map(i.s0))||[],assetCheckSelection:(null==(c=e.assetChecks)?void 0:c.map(i.D5))||[],solidSelection:void 0},mode:"default",executionMetadata:{tags:[...e.tags.map(l)]}};u.push(g)}),u},c=(e,t,n)=>{var d,c;if(!e)return[];let u=[];return null==e||null==(c=e.evaluationResult)||null==(d=c.runRequests)||d.forEach(e=>{var d,c,h;let m=(0,o.Y)(e.runConfigYaml);try{s.qg(m)}catch(e){(0,r.v)({title:"Invalid YAML",body:a});return}let{repositoryLocationName:p,repositoryName:x}=t,g={runConfigData:m,selector:{jobName:null!=(h=e.jobName)?h:n,repositoryLocationName:p,repositoryName:x,assetSelection:(null==(d=e.assetSelection)?void 0:d.map(i.s0))||[],assetCheckSelection:(null==(c=e.assetChecks)?void 0:c.map(i.D5))||[],solidSelection:void 0},mode:"default",executionMetadata:{tags:[...e.tags.map(l)]}};u.push(g)}),u}},58508:(e,t,n)=>{n.d(t,{R:()=>x});var s=n(6029),r=n(34419),i=n(26020),o=n(36660),a=n(27589),l=n(9448),d=n(97962),c=n(55729),u=n(54996),h=n(56271),m=n(48594),p=n(59447);let x=e=>{let{runRequests:t,isJob:n,repoAddress:a,mode:l,jobName:d}=e,x=(0,p.GK)(a),[j,v]=(0,c.useState)(null),[y,f]=(0,c.useState)(null),S=(0,s.jsxs)("tbody",{"data-testid":(0,m.e)("table-body"),children:[t.map((e,t)=>{var i;return(0,s.jsxs)("tr",{"data-testid":(0,m.e)(e.runKey||""),children:[(0,s.jsx)("td",{style:{verticalAlign:"middle"},children:(0,s.jsx)(r.a,{flex:{alignItems:"center",gap:8},children:(0,s.jsx)(h.E,{pipelineName:null!=(i=e.jobName)?i:d,pipelineHrefContext:a,isJob:!!x&&n,showIcon:!0,size:"small"})})}),(0,s.jsx)("td",{style:{width:"7.5%",verticalAlign:"middle",textAlign:"center"},children:(0,s.jsx)(g,{request:e,onClick:()=>{v(e),f("config")}})})]},t)}),j&&(0,s.jsx)(u.M,{isOpen:"config"===y,onClose:()=>f(null),mode:l||null,runConfigYaml:j.runConfigYaml,tags:j.tags,isJob:n,jobName:d,request:j,repoAddress:a})]});return(0,s.jsx)("div",{children:(0,s.jsxs)(i.X,{style:{borderRight:"1px solid ".concat(o.KH()),tableLayout:"fixed"},children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Target"}),(0,s.jsx)("th",{style:{width:"7.5%"},children:"Actions"})]})}),S]})})};function g(e){let{request:t,onClick:n}=e;return(0,s.jsx)(a.m,{content:"Preview run config and tags",placement:"left-start",children:(0,s.jsx)(l.$n,{icon:(0,s.jsx)(d.In,{name:"data_object"}),onClick:n,"data-testid":(0,m.e)("preview-".concat(t.runKey||""))})})}},60213:(e,t,n)=>{n.d(t,{B:()=>J,T:()=>X});var s=n(99649),r=n(93096),i=n(9329),o=n(6029);n(95181);var a=n(34419),l=n(71599),d=n(12547),c=n(26816),u=n(94168),h=n(98689),m=n(9448),p=n(97962),x=n(67221),g=n(42572),j=n(24372),v=n(85184),y=n(91991),f=n(26020),S=n(87474),w=n(87706),k=n(55729),C=n(41735),I=n(97488),b=n(32642),R=n(27674),E=n(85791),T=n(77418),A=n(98784),_=n(91374),N=n(31158),D=n(49575),O=n(94251),P=n(80300),q=n(56524),F=n(33925),M=n(36561),$=n(90108),L=n(8186),z=n(19366),U=n(53004),K=n(40308);function H(){let e=(0,i._)(["\n  query TickHistoryQuery(\n    $instigationSelector: InstigationSelector!\n    $dayRange: Int\n    $limit: Int\n    $cursor: String\n    $statuses: [InstigationTickStatus!]\n    $beforeTimestamp: Float\n    $afterTimestamp: Float\n  ) {\n    instigationStateOrError(instigationSelector: $instigationSelector) {\n      ... on InstigationState {\n        id\n        instigationType\n        ticks(\n          dayRange: $dayRange\n          limit: $limit\n          cursor: $cursor\n          statuses: $statuses\n          beforeTimestamp: $beforeTimestamp\n          afterTimestamp: $afterTimestamp\n        ) {\n          id\n          ...HistoryTick\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n  ","\n"]);return H=function(){return e},e}S.t1.register(w.Ay);var B=function(e){return e.ALL="all",e.FAILED="failed",e.SUCCESS="success",e}(B||{});let W={all:[O.lsI.SUCCESS,O.lsI.FAILURE,O.lsI.STARTED,O.lsI.SKIPPED],failed:[O.lsI.FAILURE],success:[O.lsI.SUCCESS]},J=e=>{var t,n;let{name:i,repoAddress:u,tabs:h,tickResultType:m,setTimerange:p,setParentStatuses:x}=e,[g,j]=(0,P.m)({queryKey:"status",defaults:{status:"all"}}),[v,y]=(0,k.useState)(null),[f,S]=(0,k.useState)(null),w=(0,r._)((0,s._)({},(0,K.n)(u)),{name:i}),C=k.useMemo(()=>W[g]||W.all,[g]),{queryResult:I,paginationProps:b}=(0,F.r)({nextCursorForResult:e=>{var t;if("InstigationState"===e.instigationStateOrError.__typename)return null==(t=e.instigationStateOrError.ticks[24])?void 0:t.id},getResultArray:e=>e&&"InstigationState"===e.instigationStateOrError.__typename?e.instigationStateOrError.ticks:[],variables:{instigationSelector:w,statuses:C},query:Q,pageSize:25});(0,D.Bj)(I,D.eO);let R=null==I||null==(t=I.data)?void 0:t.instigationStateOrError,T=k.useMemo(()=>(null==R?void 0:R.__typename)==="InstigationState"?R.ticks:[],[R]);k.useEffect(()=>{if(b.hasPrevCursor){if(T&&T.length){var e,t;let n=null==(e=T[T.length-1])?void 0:e.timestamp,s=null==(t=T[0])?void 0:t.endTimestamp;n&&s&&(null==p||p([n,s]))}}else null==p||p(void 0)},[b.hasPrevCursor,T,p]),k.useEffect(()=>{b.hasPrevCursor?null==x||x(Array.from(C)):null==x||x(void 0)},[b.hasPrevCursor,x,C]),k.useEffect(()=>{!b.hasPrevCursor||T.length||I.loading||b.reset()},[T,I.loading,b.hasPrevCursor]);let{data:A}=I;if(!A)return(0,o.jsx)(a.a,{padding:{vertical:48},children:(0,o.jsx)(l.y,{purpose:"page"})});if("PythonError"===A.instigationStateOrError.__typename)return(0,o.jsx)(N.Bf,{error:A.instigationStateOrError});if("InstigationStateNotFoundError"===A.instigationStateOrError.__typename)return(0,o.jsx)(a.a,{padding:{vertical:32},flex:{justifyContent:"center"},children:(0,o.jsx)(d.I,{icon:"no-results",title:"No ticks to display"})});let{instigationType:_}=A.instigationStateOrError;return T.length||"all"!==g?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.a,{padding:{vertical:12,horizontal:24},children:(0,o.jsxs)(a.a,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},children:[h,(0,o.jsx)(a.a,{flex:{direction:"row",gap:16},children:(0,o.jsx)(Y,{status:g,onChange:j})})]})}),T.length?(0,o.jsxs)(V,{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{style:{width:120},children:"Timestamp"}),(0,o.jsx)("th",{style:{width:90},children:"Status"}),(0,o.jsx)("th",{style:{width:90},children:"Duration"}),_===O._H6.SENSOR?(0,o.jsx)("th",{style:{width:120},children:"Cursor"}):null,(0,o.jsx)("th",{style:{width:180},children:"Result"}),(0,o.jsx)("th",{style:{width:80},children:"Logs"})]})}),(0,o.jsx)("tbody",{children:T.map((e,t)=>(0,o.jsx)(G,{tick:e,tickResultType:m,instigationSelector:w,index:t,onShowDetails:y,onShowLogs:S},e.id))})]}):(0,o.jsx)(a.a,{padding:{vertical:32},flex:{justifyContent:"center"},children:(0,o.jsx)(d.I,{icon:"no-results",title:"No ticks to display"})}),T.length>0?(0,o.jsx)("div",{style:{marginTop:"16px"},children:(0,o.jsx)(c.zC,(0,s._)({},b))}):null,(0,o.jsx)(E.M,{isOpen:!!v,tickId:null==v?void 0:v.tickId,tickResultType:m,instigationSelector:w,onClose:()=>y(null)}),(0,o.jsx)(L._,{isOpen:!!f,tickId:null!=(n=null==f?void 0:f.tickId)?n:null,timestamp:null==f?void 0:f.timestamp,instigationSelector:w,onClose:()=>S(null)})]}):null},Y=e=>{let{status:t,onChange:n}=e,s=[{key:"all",label:"All ticks"},{key:"success",label:"Requested"},{key:"failed",label:"Failed"}],r=s.find(e=>{let{key:n}=e;return n===t});return(0,o.jsx)(u.l,{popoverProps:{position:"bottom-right"},filterable:!1,activeItem:r,items:s,itemRenderer:(e,t)=>(0,o.jsx)(h.Dr,{active:t.modifiers.active,onClick:t.handleClick,text:e.label,style:{width:"300px"}},e.key),itemListRenderer:e=>{let{renderItem:t,filteredItems:n}=e,s=n.map(t).filter(Boolean);return(0,o.jsx)(h.W1,{children:s})},onItemSelect:e=>n(e.key),children:(0,o.jsx)(m.$n,{rightIcon:(0,o.jsx)(p.In,{name:"arrow_drop_down"}),style:{minWidth:"200px",display:"flex",justifyContent:"space-between"},children:null==r?void 0:r.label})})},X=e=>{let{name:t,repoAddress:n,tickResultType:i,onHighlightRunIds:d,beforeTimestamp:c,afterTimestamp:u,statuses:h}=e,[m,p]=(0,P.m)({encode:e=>({tickId:e}),decode:e=>"string"==typeof e.tickId?e.tickId:void 0}),[g,j]=k.useState(!1),v=(0,r._)((0,s._)({},(0,K.n)(n)),{name:t}),y=(0,A.IT)(Q,{variables:{instigationSelector:v,beforeTimestamp:c,afterTimestamp:u,statuses:h,limit:c?void 0:15},notifyOnNetworkStatusChange:!0});(0,D.Bj)(y,1e3,!(g||c&&u));let{data:f,error:S}=y;if(!f||S)return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.a,{padding:{top:16,horizontal:24},border:"bottom",children:(0,o.jsx)(x.R2,{children:"Recent ticks"})}),(0,o.jsx)(a.a,{padding:{vertical:64},children:(0,o.jsx)(l.y,{purpose:"section"})})]});if("PythonError"===f.instigationStateOrError.__typename)return(0,o.jsx)(N.Bf,{error:f.instigationStateOrError});if("InstigationStateNotFoundError"===f.instigationStateOrError.__typename)return null;let{ticks:w=[]}=f.instigationStateOrError,C=e=>{p(e?e.tickId:void 0)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(E.M,{isOpen:!!m,tickId:m,tickResultType:i,instigationSelector:v,onClose:()=>C(void 0)}),(0,o.jsx)(a.a,{padding:{vertical:16,horizontal:24},children:(0,o.jsx)(x.R2,{children:"Recent ticks"})}),(0,o.jsx)(a.a,{border:"top",children:(0,o.jsx)(R.d,{ticks:w,tickResultType:i,onHoverTick:e=>{e||j(!1),(null==e?void 0:e.runIds)&&(d&&d(e.runIds),j(!0))},onSelectTick:C,exactRange:c&&u?[u,c]:void 0})})]})};function G(e){let{tick:t,tickResultType:n,index:s,onShowDetails:r,onShowLogs:i}=e,[l,d]=k.useMemo(()=>{let e=t.dynamicPartitionsRequestResults;return[(0,T.Hw)(e,O.wWO.ADD_PARTITIONS),(0,T.Hw)(e,O.wWO.DELETE_PARTITIONS)]},[null==t?void 0:t.dynamicPartitionsRequestResults]),c=(0,T.tU)(t,s);return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)(M.J,{timestamp:t.timestamp,timeFormat:{showTimezone:!1,showSeconds:!0}})}),(0,o.jsx)("td",{children:(0,o.jsx)(z.O,{tick:t,tickResultType:n,isStuckStarted:c})}),(0,o.jsx)("td",{children:c?"- ":(0,o.jsx)(q.W,{startUnix:t.timestamp,endUnix:t.endTimestamp||Date.now()/1e3})}),t.instigationType===O._H6.SENSOR?(0,o.jsx)("td",{children:t.cursor?(0,o.jsxs)(a.a,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,o.jsx)("div",{style:{fontFamily:g.a.monospace,fontSize:"14px",maxWidth:"400px",overflow:"hidden"},children:(0,o.jsx)(j.A,{text:(0,$.MZ)(t.cursor)||""})}),(0,o.jsx)(U.r,{value:t.cursor||""})]}):(0,o.jsx)(o.Fragment,{children:"—"})}):null,(0,o.jsx)("td",{children:(0,o.jsxs)(a.a,{flex:{direction:"column",gap:6},children:["runs"===n?(0,o.jsxs)(a.a,{flex:{alignItems:"center",gap:8},children:[(0,o.jsx)(v.v,{onClick:()=>r(t),children:1===t.runIds.length?"1 run requested":"".concat(t.runIds.length," runs requested")}),1===t.runs.length?t.runs.map(e=>(0,o.jsx)(k.Fragment,{children:(0,o.jsx)(b.aA,{run:e})},e.id)):null]}):(0,o.jsx)(a.a,{flex:{alignItems:"center",gap:8},children:(0,o.jsx)(v.v,{onClick:()=>r(t),children:1===t.requestedAssetMaterializationCount?"1 materialization requested":"".concat(t.requestedAssetMaterializationCount," materializations requested")})}),l||d?(0,o.jsxs)(x.HL,{children:["(",l?(0,o.jsxs)("span",{children:[l," partition",(0,y.i)(l,"","s")," created",d?",":""]}):null,d?(0,o.jsxs)("span",{children:[d," partition",(0,y.i)(d,"","s")," deleted,"]}):null,")"]}):null]})}),(0,o.jsx)("td",{children:(0,o.jsx)(m.$n,{onClick:()=>i(t),children:"View logs"})})]})}let Q=(0,A.J1)(H(),b.y1,_.z,I.G0,b.QC),V=(0,C.Ay)(f.X).withConfig({componentId:"sc-dba3e574-0"})(["th,td{vertical-align:middle !important;}"])},60974:(e,t,n)=>{n.d(t,{X:()=>U,$:()=>L});var s=n(99649),r=n(93096),i=n(9329),o=n(6029),a=n(59129),l=n(34419),d=n(71599),c=n(36660),u=n(12547),h=n(13365),m=n(55729),p=n(3102),x=n(90108),g=n(98784),j=n(32642);function v(){let e=(0,i._)(["\n  fragment SensorFragment on Sensor {\n    id\n    name\n    description\n    minIntervalSeconds\n    sensorType\n    nextTick {\n      timestamp\n    }\n    defaultStatus\n    canReset\n    hasCursorUpdatePermissions\n    sensorState {\n      id\n      ...InstigationStateFragment\n    }\n    targets {\n      pipelineName\n      solidSelection\n      mode\n    }\n    metadata {\n      assetKeys {\n        path\n      }\n    }\n    owners {\n      ... on UserDefinitionOwner {\n        email\n      }\n      ... on TeamDefinitionOwner {\n        team\n      }\n    }\n  }\n\n  ","\n"]);return v=function(){return e},e}let y=(0,g.J1)(v(),j.FQ);var f=n(92424),S=n(91118);let w=e=>{var{sensorDaemonStatus:t,assetDaemonStatus:n}=e,i=(0,f._)(e,["sensorDaemonStatus","assetDaemonStatus"]);let a=t&&!1===t.healthy&&t.required,d=n&&!1==!n.healthy&&n.required;return d||a?(0,o.jsx)(l.a,(0,r._)((0,s._)({},i),{children:(0,o.jsx)(S.F,{intent:"warning",title:a?d?"The sensor and asset daemons are not running":"The sensor daemon is not running":"The asset daemon is not running",description:(0,o.jsxs)("div",{children:["See the"," ",(0,o.jsx)("a",{href:"https://docs.dagster.io/deployment/dagster-daemon",target:"_blank",rel:"noreferrer",children:"dagster-daemon documentation"})," ","for more information on how to deploy the dagster-daemon process."]})})})):null};var k=n(50170),C=n(95510),I=n(94543);let b=e=>{let{sensor:t,repoAddress:n,tabs:s}=e,r=m.useMemo(()=>({tags:[{key:C.d.SensorName,value:t.name},{key:C.d.RepositoryLabelTag,value:(0,I.DV)(n)}]}),[n,t.name]);return(0,o.jsx)(k.U,{filter:r,includeRunsFromBackfills:!0,actionBarComponents:s})};var R=n(91374),E=n(31158),T=n(49575),A=n(10570),_=n(26685),N=n(94251),D=n(20881),O=n(80300),P=n(75789),q=n(60213),F=n(40308);function M(){let e=(0,i._)(['\n  query SensorRootQuery($sensorSelector: SensorSelector!) {\n    sensorOrError(sensorSelector: $sensorSelector) {\n      ... on Sensor {\n        id\n        ...SensorFragment\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      id\n      daemonHealth {\n        id\n        sensorDaemonStatus: daemonStatus(daemonType: "SENSOR") {\n          id\n          healthy\n          required\n        }\n        ampDaemonStatus: daemonStatus(daemonType: "ASSET") {\n          id\n          healthy\n          required\n        }\n      }\n      ...InstanceHealthFragment\n    }\n  }\n\n  ',"\n  ","\n  ","\n"]);return M=function(){return e},e}function $(){let e=(0,i._)(["\n  query SensorAssetSelectionQuery($sensorSelector: SensorSelector!) {\n    sensorOrError(sensorSelector: $sensorSelector) {\n      ... on Sensor {\n        id\n        assetSelection {\n          ...AutomationAssetSelectionFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return $=function(){return e},e}let L=e=>{var t;let{repoAddress:n}=e;(0,A.b7)();let{sensorName:i}=(0,p.g)();(0,D.r)("Sensor: ".concat(i));let j=(0,r._)((0,s._)({},(0,F.n)(n)),{sensorName:i}),[v,y]=(0,m.useState)(void 0),[f,S]=(0,m.useState)(void 0),k=(0,m.useMemo)(()=>f||v?{afterTimestamp:null==f?void 0:f[0],beforeTimestamp:null==f?void 0:f[1],statuses:v}:{},[v,f]),[C,I]=(0,O.m)((0,m.useMemo)(()=>({queryKey:"view",decode:e=>{let{view:t}=e;return"runs"===t?"runs":"evaluations"},encode:e=>({view:e,cursor:void 0,statuses:void 0})}),[])),R=(0,g.IT)(z,{variables:{sensorSelector:j},notifyOnNetworkStatusChange:!0}),_=(0,g.IT)(U,{variables:{sensorSelector:j},notifyOnNetworkStatusChange:!0}),P=(0,T.Bj)(R,T.eO),M=(0,T.Bj)(_,T.eO),$=(0,T.T4)(P,M),{data:L,loading:K}=R,H=(0,o.jsx)(a.e,{activeItems:new Set([C]),buttons:[{id:"evaluations",label:"Evaluations"},{id:"runs",label:"Runs"}],onClick:e=>{I(e)}});if(!L&&K)return(0,o.jsxs)(l.a,{margin:{top:32},flex:{direction:"row",alignItems:"center",justifyContent:"center",gap:16},children:[(0,o.jsx)(d.y,{purpose:"body-text"}),(0,o.jsx)("div",{style:{color:c.XN()},children:"Loading sensor…"})]});if(!L||"SensorNotFoundError"===L.sensorOrError.__typename)return(0,o.jsx)(l.a,{padding:{vertical:32},children:(0,o.jsx)(u.I,{icon:"error",title:"Could not find sensor `".concat(i,"` in definitions for `").concat(n.name,"`")})});let{sensorOrError:B}=L;if("PythonError"===B.__typename)return(0,o.jsx)(E.Bf,{error:B});if("UnauthorizedError"===B.__typename)return(0,o.jsx)(p.rd,{to:"/overview/sensors"});let{instance:W}=L,J=(null==(t=_.data)?void 0:t.sensorOrError.__typename)==="Sensor"?_.data.sensorOrError.assetSelection:null,Y=B.sensorType===N.$Up.AUTO_MATERIALIZE||B.sensorType===N.$Up.AUTOMATION,X=W.daemonHealth.sensorDaemonStatus,G=Y?"materializations":"runs";return(0,o.jsxs)(h.Y,{children:[(0,o.jsx)(x.Rz,{repoAddress:n,sensor:B,daemonHealth:X.healthy,refreshState:$,assetSelection:J||null}),(0,o.jsx)(w,{sensorDaemonStatus:X,padding:{vertical:16,horizontal:24}}),(0,o.jsx)(q.T,(0,s._)({tickResultType:G,repoAddress:n,name:B.name},k)),(0,o.jsx)(l.a,{margin:{top:32},border:"top",children:"evaluations"===C?(0,o.jsx)(q.B,{tabs:H,tickResultType:G,repoAddress:n,name:B.name,setParentStatuses:y,setTimerange:S}):(0,o.jsx)(b,{repoAddress:n,sensor:B,tabs:H})})]})},z=(0,g.J1)(M(),y,R.z,P.c),U=(0,g.J1)($(),_.b,R.z)},62808:(e,t,n)=>{n.d(t,{o:()=>h});var s=n(99649),r=n(93096),i=n(55729),o=n(3102),a=n(57503),l=n(98784),d=n(640),c=n(3271),u=n(85521);function h(){let[e]=(0,l.n_)(u.Ce),t=(0,c.Fw)(),n=(0,o.W6)();return(0,i.useCallback)(async(i,o)=>{try{var l;let a=Array.isArray(i.executionParamsList)?i.executionParamsList:[i.executionParamsList],h=a.map(e=>e.selector.jobName||e.selector.pipelineName);if(h.length!==a.length||h.includes(void 0)||h.includes(null))throw Error("Error: Invalid job names. Each RunRequest must specify a job name to launch all runs");let m={jobNames:h.filter(e=>void 0!==e),opSelection:void 0},p=(0,r._)((0,s._)({},i),{executionParamsList:Array.isArray(i.executionParamsList)?i.executionParamsList.map(d.qo):(0,d.qo)(i.executionParamsList)}),x=null==(l=(await e({variables:p})).data)?void 0:l.launchMultipleRuns;return x&&((0,u.fX)(x,n,{behavior:o}),t(c.q1.LAUNCH_MULTIPLE_RUNS,m)),x}catch(e){console.error("error",e),(0,a.D)(e)}},[n,e,t])}},77418:(e,t,n)=>{n.d(t,{Hw:()=>i,tU:()=>r});var s=n(94251);function r(e,t){return!e.endTimestamp&&(0!==t&&e.status===s.lsI.STARTED||1e3*e.timestamp<Date.now()-2592e5)}function i(e,t){return e.reduce((e,n)=>{if(n.type===t){var s;return e+((null==(s=n.partitionKeys)?void 0:s.length)||0)}return e},0)}},90108:(e,t,n)=>{n.d(t,{Rz:()=>em,MZ:()=>eh});var s=n(6029),r=n(71802),i=n(67221),o=n(30424),a=n(34419),l=n(4533),d=n(42572),c=n(27589),u=n(9448),h=n(97962),m=n(55729),p=n(38584);let x=e=>null;var g=n(41735),j=n(13155),v=n(38196);let y=e=>{var t;let{metadata:n}=e;return(null==n||null==(t=n.assetKeys)?void 0:t.length)?(0,s.jsx)(a.a,{flex:{direction:"column",gap:2},children:n.assetKeys.map(e=>(0,s.jsx)(v.H,{path:e.path,icon:"asset"},e.path.join("/")))}):(0,s.jsx)("span",{})};var f=n(99649),S=n(93096),w=n(65192),k=n(98784),C=n(58342),I=n(40308);let b=e=>{let{repoAddress:t,sensor:n}=e,{name:r}=n,i=(0,S._)((0,f._)({},(0,I.n)(t)),{sensorName:r}),[o,{loading:a}]=(0,k.n_)(w.tf,{onCompleted:w.vO}),l=n.sensorState.hasStartPermission&&n.sensorState.hasStopPermission,d=l?'In code, a default status for "'.concat(r,'" has been set to "').concat(n.defaultStatus,'". Click here to reset the sensor status to track the status set in code.'):C.gZ;return(0,s.jsx)(c.m,{content:(0,s.jsx)("div",{style:{maxWidth:"500px",wordBreak:"break-word"},children:d}),display:"flex",children:(0,s.jsx)(u.$n,{disabled:a||!l,onClick:()=>{o({variables:{sensorSelector:i}})},children:"Reset sensor status"})})};var R=n(56091),E=n(49575),T=n(49652),A=n(94251),_=n(69356),N=n(50158),D=n(36561),O=n(9329),P=n(74016),q=n(85184),F=n(36660),M=n(71599),$=n(12547),L=n(46371),z=n(58508),U=n(26020);function K(e){let{includeTitle:t=!0,requests:n}=e,r=(0,m.useMemo)(()=>{if(!n.length)return[];let e=[];return n.forEach(t=>{let{partitionKeys:n,partitionsDefName:s,type:r}=t;null==n||n.forEach(t=>{e.push({key:t,def:s,type:r})})}),e},[n]);return r.length?(0,s.jsxs)(a.a,{flex:{direction:"column",gap:12,grow:1},children:[t?(0,s.jsxs)(a.a,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,s.jsx)(h.In,{name:"partition"}),(0,s.jsx)(i.R2,{children:"Dynamic Partition Requests"})]}):null,(0,s.jsxs)(U.X,{style:{borderRight:"1px solid ".concat(F.KH())},children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Partition"}),(0,s.jsx)("th",{children:"Partition definition"}),(0,s.jsx)("th",{children:"Requested change"})]})}),(0,s.jsx)("tbody",{children:r.map((e,t)=>{let{key:n,def:r,type:i}=e;return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:n}),(0,s.jsx)("td",{children:r}),(0,s.jsx)("td",{children:i===A.wWO.ADD_PARTITIONS?(0,s.jsx)(o.v,{intent:"success",children:(0,s.jsx)("span",{children:"Add Partition"})}):(0,s.jsx)(o.v,{intent:"danger",children:(0,s.jsx)("span",{children:"Delete Partition"})})})]},t)})})]})]}):null}var H=n(43189),B=n(78224),W=n(90713),J=n(91374),Y=n(31158),X=n(8131),G=n(10570),Q=n(70373),V=n(62808),Z=n(16872),ee=n(48594),et=n(58421);function en(){let e=(0,O._)(["\n  mutation SensorDryRunMutation($selectorData: SensorSelector!, $cursor: String) {\n    sensorDryRun(selectorData: $selectorData, cursor: $cursor) {\n      ... on DryRunInstigationTick {\n        timestamp\n        evaluationResult {\n          cursor\n          runRequests {\n            ...RunRequestFragment\n          }\n          skipReason\n          error {\n            ...PythonErrorFragment\n          }\n          dynamicPartitionsRequests {\n            ...DynamicPartitionRequestFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment DynamicPartitionRequestFragment on DynamicPartitionRequest {\n    partitionKeys\n    partitionsDefName\n    type\n  }\n\n  ","\n  ","\n"]);return en=function(){return e},e}let es=e=>{let{isOpen:t,onClose:n,name:r}=e;return(0,s.jsx)(P.lG,{isOpen:t,onClose:n,style:{width:"70vw",display:"flex"},icon:"preview_tick",title:"Preview tick result for ".concat(r),children:(0,s.jsx)(er,(0,f._)({},e))})},er=e=>{var t,n;let{repoAddress:r,name:l,currentCursor:d,onClose:p,jobName:x}=e,g=(0,G.jt)(),[v]=(0,k.n_)(ei),[y]=(0,k.n_)(j.w),[f]=(0,k.n_)(Z.u),[S]=(0,k.n_)(Q.Sm),[w,C]=(0,m.useState)(d),[I,b]=(0,m.useState)(!1),[R,E]=(0,m.useState)(!1),[T,_]=(0,m.useState)(null),[N,D]=(0,m.useState)(null),O=(0,m.useMemo)(()=>({sensorName:l,repositoryLocationName:r.location,repositoryName:r.name}),[r,l]),U=(0,m.useMemo)(()=>N&&O?(0,et.R)(N,O,x):[],[O,N,x]),H=null==N||null==(t=N.evaluationResult)?void 0:t.dynamicPartitionsRequests,J=(0,m.useCallback)(async()=>{var e,t;b(!0);let n=null==(e=(await v({variables:{selectorData:O,cursor:w}})).data)?void 0:e.sensorDryRun;n?(null==n?void 0:n.__typename)==="DryRunInstigationTick"?(null==(t=n.evaluationResult)?void 0:t.error)?_(n.evaluationResult.error):D(n):(null==n?void 0:n.__typename)==="SensorNotFoundError"?(0,B.v)({title:"Sensor not found",body:"Could not find a sensor named: ".concat(l)}):_(n):(0,X.dr)("sensorDryRun Mutation returned no data??"),b(!1)},[v,O,w,l]),en=(0,m.useCallback)(async()=>{var e;let t=null==N||null==(e=N.evaluationResult)?void 0:e.cursor;if(!t)return;let{data:n}=await y({variables:{sensorSelector:O,cursor:t}});if((null==n?void 0:n.setSensorCursor.__typename)==="Sensor")await (0,W.l)({message:"Cursor value updated",intent:"success"});else if(null==n?void 0:n.setSensorCursor){let e=n.setSensorCursor;await (0,W.l)({intent:"danger",message:(0,s.jsxs)(a.a,{flex:{direction:"row",gap:8},children:[(0,s.jsx)("div",{children:"Could not set cursor value."}),(0,s.jsx)(q.v,{color:F.C4(),underline:"always",onClick:()=>{(0,B.v)({title:"Python Error",body:"PythonError"===e.__typename?(0,s.jsx)(Y.Bf,{error:e}):"Sensor not found"})},children:"View error"})]})})}},[null==N||null==(n=N.evaluationResult)?void 0:n.cursor,O,y]),es=(0,V.o)(),er=(0,m.useMemo)(()=>null!=U&&U.length>0||((null==H?void 0:H.length)||0)>0,[U,H]),ed=(0,m.useCallback)(async()=>{if(er){g("launch-all-sensor"),E(!0);try{(null==H?void 0:H.length)&&await Promise.all(H.map(async e=>{e.type===A.wWO.ADD_PARTITIONS?await Promise.all((e.partitionKeys||[]).map(async t=>{await f({variables:{repositorySelector:{repositoryName:r.name,repositoryLocationName:r.location},partitionsDefName:e.partitionsDefName,partitionKey:t}})})):e.partitionKeys&&e.partitionKeys.length&&await S({variables:{repositorySelector:{repositoryName:r.name,repositoryLocationName:r.location},partitionsDefName:e.partitionsDefName,partitionKeys:e.partitionKeys}})})),U&&await es({executionParamsList:U},"toast"),en()}catch(e){console.error(e)}E(!1),p()}},[er,f,S,H,U,es,p,en,r,g]),ec=(0,m.useMemo)(()=>R?null:N||T?(0,s.jsx)(u.$n,{icon:(0,s.jsx)(h.In,{name:"settings_backup_restore"}),"data-testid":(0,ee.e)("try-again"),onClick:()=>{D(null),_(null)},children:"Try again"}):null,[R,N,T]),eu=(0,m.useMemo)(()=>{if(R)return(0,s.jsx)(a.a,{flex:{direction:"row",gap:8}});if(N||T){var e;let t=null==N||null==(e=N.evaluationResult)?void 0:e.runRequests,n=(null==t?void 0:t.length)||0,r=!T&&0===n;return T?(0,s.jsx)(a.a,{flex:{direction:"row",gap:8},children:(0,s.jsx)(u.$n,{onClick:p,children:"Close"})}):r?(0,s.jsxs)(a.a,{flex:{direction:"row",gap:8},children:[(0,s.jsx)(u.$n,{onClick:p,children:"Close"}),(0,s.jsx)(c.m,{content:"Commits tick result",placement:"top-end",children:(0,s.jsx)(u.$n,{icon:(0,s.jsx)(h.In,{name:"check_filled"}),intent:"primary",onClick:en,"data-testid":(0,ee.e)("commit-tick-result"),children:(0,s.jsx)("div",{children:"Commit tick result"})})})]}):(0,s.jsxs)(a.a,{flex:{direction:"row",gap:8},children:[(0,s.jsx)(u.$n,{onClick:p,children:"Close"}),(0,s.jsx)(c.m,{canShow:!er||R,content:"Applies requests, launches all runs, and commits tick result",placement:"top-end",children:(0,s.jsx)(u.$n,{icon:(0,s.jsx)(h.In,{name:"check_filled"}),intent:"primary",disabled:!er||R,onClick:ed,"data-testid":(0,ee.e)("launch-all"),children:(0,s.jsx)("div",{children:"Apply requests & commit tick result"})})})]})}return I?(0,s.jsx)(a.a,{flex:{direction:"row",gap:8},children:(0,s.jsx)(u.$n,{onClick:p,children:"Cancel"})}):(0,s.jsxs)(a.a,{flex:{direction:"row",gap:8},children:[(0,s.jsx)(u.$n,{onClick:p,children:"Cancel"}),(0,s.jsx)(u.$n,{onClick:J,intent:"primary","data-testid":(0,ee.e)("continue"),children:"Continue"})]})},[R,N,T,I,p,en,er,ed,J]),eh=(0,m.useMemo)(()=>{if(R)return(0,s.jsxs)(a.a,{flex:{direction:"row",gap:8,justifyContent:"center",alignItems:"center"},children:[(0,s.jsx)(M.y,{purpose:"body-text"}),(0,s.jsx)("div",{children:"Launching runs"})]});if(N||T){var e,t,n,d,c;let u=null==N||null==(e=N.evaluationResult)?void 0:e.runRequests,h=(null==u?void 0:u.length)||0,m=!T&&0===h,p=null==N||null==(t=N.evaluationResult)?void 0:t.dynamicPartitionsRequests;return(0,s.jsxs)(a.a,{flex:{direction:"column",gap:8},children:[(0,s.jsxs)(eo,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(i.R2,{children:"Result"}),(0,s.jsx)(a.a,{flex:{grow:1,alignItems:"center"},children:(0,s.jsx)("div",{children:T?(0,s.jsx)(o.v,{intent:"danger",children:"Failed"}):h?(0,s.jsxs)(o.v,{intent:"success",children:[h," run requests"]}):(0,s.jsx)(o.v,{intent:"warning",children:"Skipped"})})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(i.R2,{children:"Used cursor value"}),(0,s.jsx)("pre",{children:(null==w?void 0:w.length)?w:"None"})]})]}),(0,s.jsxs)(a.a,{children:[T?(0,s.jsx)("div",{children:(0,s.jsx)(Y.Bf,{error:T})}):null,m?(0,s.jsxs)(a.a,{flex:{direction:"column",gap:8},children:[(0,s.jsx)(i.R2,{style:{marginBottom:8},children:"Requested runs (0)"}),(0,s.jsx)("div",{children:(0,s.jsx)(el,{children:(0,s.jsx)($.I,{icon:"missing",title:"No runs requested",description:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"The sensor function was successfully evaluated but didn't return any run requests."}),(0,s.jsxs)("span",{children:[(0,s.jsx)("br",{}),"Skip reason:"," ",(null==N||null==(n=N.evaluationResult)?void 0:n.skipReason)?'"'.concat(N.evaluationResult.skipReason,'"'):"No skip reason was output"]})]})})})})]}):null,h&&u?(0,s.jsxs)(a.a,{flex:{direction:"column",gap:8},children:[(0,s.jsxs)(i.R2,{children:["Requested runs (",h,")"]}),(0,s.jsx)(z.R,{runRequests:u,name:l,jobName:x,isJob:!0,repoAddress:r})]}):null,(null==p?void 0:p.length)?(0,s.jsx)("div",{style:{marginTop:"24px"},children:(0,s.jsx)(K,{requests:p})}):null]}),(0,s.jsxs)(ea,{children:[(0,s.jsx)(i.R2,{children:"Computed cursor value"}),(0,s.jsx)("pre",{children:(null==N||null==(c=N.evaluationResult)||null==(d=c.cursor)?void 0:d.length)?null==N?void 0:N.evaluationResult.cursor:T?"Error":"None"})]})]})}return I?(0,s.jsxs)(a.a,{flex:{direction:"row",gap:8,justifyContent:"center",alignItems:"center"},children:[(0,s.jsx)(M.y,{purpose:"body-text"}),(0,s.jsx)("div",{children:"Evaluating sensor"})]}):(0,s.jsxs)(a.a,{flex:{direction:"column",gap:8},children:[(0,s.jsx)("div",{children:"Cursor value (optional)"}),(0,s.jsx)(L.k,{value:w,onChange:e=>C(e.target.value),"data-testid":(0,ee.e)("cursor-input"),placeholder:"Enter a cursor value"}),(0,s.jsx)("div",{children:"A cursor tracks where a sensor left off, allowing the sensor to efficiently process new changes or events without missing anything or duplicating work. The cursor is typically a string, and can be updated within the sensor's logic to reflect the latest state."}),(0,s.jsxs)("div",{children:[(0,s.jsx)("a",{href:"https://docs.dagster.io/concepts/partitions-schedules-sensors/sensors#idempotence-and-cursors",children:"Learn more"})," ","about cursors"]})]})},[N,T,I,R,l,x,r,w]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(P.R4,{children:(0,s.jsx)("div",{style:{minHeight:"300px"},children:eh})}),(0,s.jsx)(P.Es,{topBorder:!0,left:ec,children:eu})]})},ei=(0,k.J1)(en(),H.n,J.z),eo=g.Ay.div.withConfig({componentId:"sc-a47fecf3-0"})(["display:grid;grid-template-columns:repeat(2,1fr);padding-bottom:12px;border-bottom:1px solid ",";","{padding-bottom:4px;display:block;}pre{margin:0;}button{margin-top:4px;}"],F.KH(),i.R2),ea=g.Ay.div.withConfig({componentId:"sc-a47fecf3-1"})(["display:grid;grid-template-columns:repeat(1,1fr);padding-bottom:12px;","{padding-bottom:4px;display:block;}pre{margin:0;}button{margin-top:4px;}"],i.R2),el=g.Ay.div.withConfig({componentId:"sc-a47fecf3-2"})(["","{margin:auto !important;width:unset !important;max-width:unset !important;}"],$.T),ed=e=>{let{cursor:t,name:n,repoAddress:r,jobName:i,sensorType:o}=e,[l,d]=(0,m.useState)(!1);return(0,s.jsxs)(a.a,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,s.jsx)(c.m,{canShow:o!==A.$Up.STANDARD,content:"Testing not available for this sensor type",placement:"top-end",children:(0,s.jsx)(u.$n,{disabled:o!==A.$Up.STANDARD,onClick:()=>d(!0),icon:(0,s.jsx)(h.In,{name:"preview_tick"}),children:"Preview tick result"})}),(0,s.jsx)(es,{isOpen:l,onClose:()=>d(!1),currentCursor:t,name:n,repoAddress:r,jobName:i})]})};var ec=n(19366);let eu={showSeconds:!0,showTimezone:!1},eh=e=>{if(e&&e.startsWith('{"__class__"')){let t=JSON.parse(e);return delete t.__class__,Object.entries(t).filter(e=>null!==e[1]&&0!==e[1]).map(e=>{let[t,n]=e;return"".concat(t,"=").concat(n)}).join(",")}return e},em=e=>{var t,n;let{sensor:g,repoAddress:v,daemonHealth:f,refreshState:S,assetSelection:w}=e,{name:k,sensorState:{status:I,ticks:O},metadata:P}=g,[q,F]=(0,m.useState)(!1),M={sensorName:g.name,repositoryName:v.name,repositoryLocationName:v.location},$=O.length?O[0]:null,L=g.sensorState.typeSpecificData&&"SensorData"===g.sensorState.typeSpecificData.__typename&&g.sensorState.typeSpecificData.lastCursor,z=I===A.WqK.RUNNING;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.z,{title:(0,s.jsxs)(i.M7,{style:{display:"flex",flexDirection:"row",gap:4},children:[(0,s.jsx)(p.N_,{to:"/automation",children:"Automation"}),(0,s.jsx)("span",{children:"/"}),k]}),icon:"sensors",tags:(0,s.jsxs)(o.v,{icon:"sensors",children:["Sensor in ",(0,s.jsx)(_.p,{repoAddress:v})]}),right:(0,s.jsxs)(a.a,{margin:{top:4},flex:{direction:"row",alignItems:"center",gap:8},children:[(0,s.jsx)(E.D7,{refreshState:S}),(0,s.jsx)(ed,{cursor:L||"",name:g.name,repoAddress:v,jobName:(null==(n=g.targets)||null==(t=n[0])?void 0:t.pipelineName)||"",sensorType:g.sensorType})]})}),(0,s.jsx)(l.Wy,{children:(0,s.jsxs)("tbody",{children:[g.description?(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"Description"}),(0,s.jsx)("td",{children:g.description})]}):null,g.owners.length>0&&(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"Owners"}),(0,s.jsx)("td",{children:(0,s.jsx)(N.a,{owners:g.owners})})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"Latest tick"}),(0,s.jsx)("td",{children:$?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(a.a,{flex:{direction:"row",gap:8,alignItems:"center"},style:{marginTop:"-2px"},children:[(0,s.jsx)(D.J,{timestamp:$.timestamp,timeFormat:eu}),(0,s.jsx)(ec.O,{tick:$,tickResultType:"runs"})]})}):"Sensor has never run"})]}),g.nextTick&&f&&z&&(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"Next tick"}),(0,s.jsx)("td",{children:(0,s.jsx)(D.J,{timestamp:g.nextTick.timestamp,timeFormat:eu})})]}),g.targets&&g.targets.length||w?(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"Target"}),(0,s.jsx)(ep,{children:(0,s.jsx)(T.r,{targets:g.targets,repoAddress:v,assetSelection:w||null,automationType:g.sensorType})})]}):null,(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)(a.a,{flex:{alignItems:"center"},style:{height:"32px"},children:"Running"})}),(0,s.jsx)("td",{children:(0,s.jsxs)(a.a,{flex:{direction:"row",gap:12,alignItems:"center"},style:{height:"32px"},children:[(0,s.jsx)(R.z,{repoAddress:v,sensor:g}),g.canReset&&(0,s.jsx)(b,{repoAddress:v,sensor:g})]})})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"Frequency"}),(0,s.jsx)("td",{children:(e=>(e||(e=30),e<60||e%60)?"~".concat(e," sec"):3600===e?"~1 hour":e<3600||e%3600?"~".concat(e/60," min"):86400===e?"~1 day":e<86400||e%86400?"~".concat(e/3600," hours"):"~".concat(e/86400," days"))(g.minIntervalSeconds)})]}),P.assetKeys&&P.assetKeys.length?(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"Monitored assets"}),(0,s.jsx)("td",{children:(0,s.jsx)(y,{metadata:P})})]}):null,g.sensorType!==A.$Up.AUTO_MATERIALIZE&&g.sensorType!==A.$Up.AUTOMATION?(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)(a.a,{flex:{alignItems:"center"},style:{height:"32px"},children:"Cursor"})}),(0,s.jsxs)("td",{children:[(0,s.jsxs)(a.a,{flex:{direction:"row",gap:12,alignItems:"center"},children:[(0,s.jsx)("span",{style:{fontFamily:d.a.monospace,fontSize:"14px"},children:L?eh(L):"None"}),(0,s.jsx)(c.m,{canShow:!g.hasCursorUpdatePermissions,content:C.gZ,children:(0,s.jsx)(u.$n,{icon:(0,s.jsx)(h.In,{name:"edit"}),disabled:!g.hasCursorUpdatePermissions,onClick:()=>F(!0),children:L!==eh(L)?"View Raw / Edit":"Edit"})})]}),(0,s.jsx)(j.b,{isOpen:q,sensorSelector:M,cursor:L||"",onClose:()=>F(!1)})]})]}):null,(0,s.jsx)(x,{repoAddress:v,sensorName:k})]})})]})},ep=g.Ay.td.withConfig({componentId:"sc-23865736-0"})(["button{line-height:20px;}"])}}]);
//# sourceMappingURL=143.f31a9d9faf0995ab.js.map