"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[24],{72024:(e,s,n)=>{n.d(s,{J:()=>K,H:()=>k});var r=n(99649),t=n(93096),i=n(9329),l=n(6029),o=n(34419),c=n(36660),a=n(13365),d=n(71802),h=n(67221),x=n(30424),j=n(91118),u=n(85184),p=n(27355),m=n(27589),g=n(26020),y=n(12547),f=n(97962),v=n(24372);n(55729);var R=n(3102),b=n(38584),w=n(21316),_=n(48780),D=n(1536);let E={configuration:"Configuration",uses:"Uses"},I=e=>{let{repoAddress:s,resourceName:n,numUses:r}=e,t=(0,R.W5)(["/locations/:repoPath/resources/:name/:tab?"]),i=(null==t?void 0:t.params.tab)&&E[null==t?void 0:t.params.tab]||"Configuration";return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(w.tU,{size:"large",selectedTabId:i,children:[(0,l.jsx)(_.s,{id:"Configuration",title:"Configuration",to:(0,D.HG)(s,"/resources/".concat(n))},"configuration"),(0,l.jsx)(_.s,{id:"Uses",title:(0,l.jsxs)(o.a,{flex:{gap:4,alignItems:"center"},children:["Uses",(0,l.jsx)(x.v,{intent:"none",children:r})]}),to:(0,D.HG)(s,"/resources/".concat(n,"/uses"))},"uses")]})})};var S=n(98784),U=n(78224),N=n(91374),O=n(10570),T=n(38196),A=n(20881),L=n(69356),W=n(19805),C=n(13680),H=n(40308);function V(){let e=(0,i._)(["\n  fragment ResourceDetailsFragment on ResourceDetails {\n    id\n    name\n    description\n    configFields {\n      name\n      description\n      configTypeKey\n      isRequired\n      defaultValueAsJson\n    }\n    configuredValues {\n      key\n      value\n      type\n    }\n    nestedResources {\n      name\n      type\n      resource {\n        id\n        name\n        resourceType\n        description\n      }\n    }\n    parentResources {\n      name\n      resource {\n        id\n        name\n        resourceType\n        description\n      }\n    }\n    assetKeysUsing {\n      path\n    }\n    schedulesUsing\n    sensorsUsing\n    jobsOpsUsing {\n      jobName\n      opHandleIDs\n    }\n    resourceType\n  }\n"]);return V=function(){return e},e}function F(){let e=(0,i._)(["\n  query ResourceRootQuery($resourceSelector: ResourceSelector!) {\n    topLevelResourceDetailsOrError(resourceSelector: $resourceSelector) {\n      ...ResourceDetailsFragment\n      ...PythonErrorFragment\n    }\n  }\n  ","\n  ","\n"]);return F=function(){return e},e}let k=e=>(null==e?void 0:e.split(".").pop())||null,P=e=>e?e.name.startsWith("_nested_")?k(null==e?void 0:e.resourceType):e.name:null,G=e=>(0,l.jsx)(o.a,{padding:{left:24,vertical:16},background:c.GW(),border:"all",children:e.children}),K=e=>{var s,n,i,g;(0,O.b7)();let{repoAddress:y}=e,{resourceName:f}=(0,R.g)();(0,A.r)("Resource: ".concat(f));let v=(0,t._)((0,r._)({},(0,H.n)(y)),{resourceName:f}),b=(0,S.IT)(M,{variables:{resourceSelector:v}}),w=(null==(s=b.data)?void 0:s.topLevelResourceDetailsOrError.__typename)==="ResourceDetails"&&P(null==(n=b.data)?void 0:n.topLevelResourceDetailsOrError)||f,_=(null==(i=b.data)?void 0:i.topLevelResourceDetailsOrError.__typename)==="ResourceDetails"?b.data.topLevelResourceDetailsOrError.parentResources.length+b.data.topLevelResourceDetailsOrError.assetKeysUsing.length+b.data.topLevelResourceDetailsOrError.jobsOpsUsing.length+b.data.topLevelResourceDetailsOrError.schedulesUsing.length+b.data.topLevelResourceDetailsOrError.sensorsUsing.length:0,D=null==(g=(0,R.W5)(["/locations/:repoPath/resources/:name/:tab?"]))?void 0:g.params.tab;return(0,l.jsxs)(a.Y,{style:{height:"100%",overflow:"hidden"},children:[(0,l.jsx)(d.z,{title:(0,l.jsx)(h.M7,{children:w}),tags:(0,l.jsxs)(x.v,{icon:"resource",children:["Resource in ",(0,l.jsx)(L.p,{repoAddress:y})]}),tabs:(0,l.jsx)(I,{repoAddress:y,resourceName:f,numUses:_})}),(0,l.jsx)(W.R,{queryResult:b,allowStaleData:!0,children:e=>{let{topLevelResourceDetailsOrError:s}=e;if("ResourceDetails"!==s.__typename){let e=null;return"PythonError"===s.__typename&&(e=s.message),(0,l.jsx)(j.F,{intent:"warning",title:(0,l.jsxs)(o.a,{flex:{direction:"row",gap:4},children:[(0,l.jsx)("div",{children:"Could not load resource."}),e&&(0,l.jsx)(u.v,{color:c.Hv(),underline:"always",onClick:()=>{(0,U.v)({title:"Python error",body:e})},children:"View error"})]})})}let n=k(s.resourceType);return(0,l.jsx)("div",{style:{height:"100%",display:"flex"},children:(0,l.jsx)(p.c,{identifier:"resource-explorer",firstInitialPercent:50,firstMinSize:400,first:(0,l.jsx)(o.a,{padding:{bottom:48},style:{overflowY:"auto"},children:"uses"===D?(0,l.jsx)(J,{resourceDetails:s,repoAddress:y,numUses:_}):(0,l.jsx)(z,{resourceDetails:s,repoAddress:y})}),second:(0,l.jsxs)(o.a,{padding:{bottom:48},style:{overflowY:"auto"},children:[(0,l.jsxs)(o.a,{flex:{gap:4,direction:"column"},margin:{left:24,right:12,vertical:16},children:[(0,l.jsx)(h.DZ,{children:w}),(0,l.jsx)(m.m,{content:s.resourceType||"",children:(0,l.jsx)(h.Kp,{children:n})})]}),(0,l.jsx)(o.a,{border:"top-and-bottom",background:c.GW(),padding:{vertical:8,horizontal:24},style:{fontSize:"12px",fontWeight:500},children:"Description"}),(0,l.jsx)(o.a,{padding:{horizontal:24,vertical:16},children:s.description?(0,l.jsx)(C.o,{children:s.description.split("\n").map(e=>e.replace(/^    /,"")).join("\n")}):"None"})]})})})}})]})},z=e=>{let{resourceDetails:s,repoAddress:n}=e,r=Object.fromEntries(s.configuredValues.map(e=>[e.key,{value:e.value,type:e.type}])),t=s.nestedResources;return(0,l.jsxs)(l.Fragment,{children:[t.length>0&&(0,l.jsxs)(o.a,{children:[(0,l.jsx)(G,{children:(0,l.jsx)(h.R2,{children:"Resource dependencies"})}),(0,l.jsxs)(g.X,{children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{style:{width:120},children:"Key"}),(0,l.jsx)("th",{style:{width:180},children:"Resource"})]})}),(0,l.jsx)("tbody",{children:t.map(e=>{let s="TOP_LEVEL"===e.type&&e.resource?(0,l.jsx)(X,{url:(0,D.HG)(n,"/resources/".concat(e.name)),name:P(e.resource)||"",description:e.resource.description||void 0},e.name):(0,l.jsx)(X,{name:e.name},e.name);return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsx)("strong",{children:e.name})}),(0,l.jsx)("td",{colSpan:2,children:s})]},e.name)})})]})]}),(0,l.jsxs)(o.a,{children:[(0,l.jsx)(G,{children:(0,l.jsx)(h.R2,{children:"Configuration"})}),(0,l.jsxs)(g.X,{children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{style:{width:120},children:"Key"}),(0,l.jsx)("th",{style:{width:90},children:"Type"}),(0,l.jsx)("th",{style:{width:90},children:"Value"})]})}),(0,l.jsx)("tbody",{children:0===s.configFields.length?(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:3,children:(0,l.jsx)(o.a,{padding:{vertical:8},children:(0,l.jsx)(y.I,{icon:"settings",title:"No configuration",description:"This resource has no configuration fields."})})})}):s.configFields.map(e=>{let s=e.defaultValueAsJson,n=r.hasOwnProperty(e.name)?r[e.name].type:null,t=r.hasOwnProperty(e.name)?r[e.name].value:s,i="VALUE"===n&&s===t;return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsxs)(o.a,{flex:{direction:"column",gap:4,alignItems:"flex-start"},children:[(0,l.jsx)("strong",{children:e.name}),(0,l.jsx)("div",{style:{fontSize:12,color:c.XN()},children:e.description})]})}),(0,l.jsx)("td",{children:(e=>"StringSourceType"===e?"String":"IntSourceType"===e?"Int":"BoolSourceType"===e?"Bool":e)(e.configTypeKey)}),(0,l.jsx)("td",{children:(0,l.jsxs)(o.a,{flex:{direction:"row",gap:16},children:[(0,l.jsx)(m.m,{content:(0,l.jsxs)(l.Fragment,{children:["Default: ",s]}),canShow:!i&&!!s,children:"ENV_VAR"===n?(0,l.jsx)(x.v,{children:t}):t}),i&&(0,l.jsx)(x.v,{children:"Default"}),"ENV_VAR"===n&&(0,l.jsx)(x.v,{intent:"success",children:"Env var"}),"SECRET"===n&&(0,l.jsx)(x.v,{intent:"warning",children:"Secret"})]})})]},e.name)})})]})]})]})},J=e=>{let{resourceDetails:s,repoAddress:n,numUses:r}=e;if(0===r)return(0,l.jsx)(o.a,{padding:{vertical:16},children:(0,l.jsx)(y.I,{icon:"list",title:"No uses",description:"This resource is not used by any assets or resources."})});let t=s.parentResources;return(0,l.jsxs)(l.Fragment,{children:[t.length>0&&(0,l.jsxs)(o.a,{children:[(0,l.jsx)(G,{children:(0,l.jsx)(h.R2,{children:"Parent resources"})}),(0,l.jsxs)(g.X,{children:[(0,l.jsx)("thead",{children:(0,l.jsx)("tr",{children:(0,l.jsx)("th",{children:"Resource"})})}),(0,l.jsx)("tbody",{children:t.map(e=>e.resource&&(0,l.jsx)("tr",{children:(0,l.jsx)("td",{children:(0,l.jsx)(X,{url:(0,D.HG)(n,"/resources/".concat(e.resource.name)),name:P(e.resource)||"",description:e.resource.description||void 0})})},e.resource.name))})]})]}),s.assetKeysUsing.length>0&&(0,l.jsxs)(o.a,{children:[(0,l.jsx)(G,{children:(0,l.jsx)(h.R2,{children:"Assets"})}),(0,l.jsxs)(g.X,{children:[(0,l.jsx)("thead",{children:(0,l.jsx)("tr",{children:(0,l.jsx)("th",{children:"Asset key"})})}),(0,l.jsx)("tbody",{children:s.assetKeysUsing.map(e=>(0,l.jsx)("tr",{children:(0,l.jsx)("td",{children:(0,l.jsx)(T.H,{path:e.path,icon:"asset"},e.path.join("/"))})},e.path.join("/")))})]})]}),s.jobsOpsUsing.length>0&&(0,l.jsxs)(o.a,{children:[(0,l.jsx)(G,{children:(0,l.jsx)(h.R2,{children:"Jobs"})}),(0,l.jsxs)(g.X,{children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Job name"}),(0,l.jsx)("th",{children:"Ops"})]})}),(0,l.jsx)("tbody",{children:s.jobsOpsUsing.map(e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsxs)(o.a,{flex:{direction:"row",alignItems:"center",display:"inline-flex",gap:8},style:{maxWidth:"100%"},children:[(0,l.jsx)(f.In,{name:"job",color:c.fR()}),(0,l.jsx)(b.N_,{to:(0,D.HG)(n,"/jobs/".concat(e.jobName)),children:(0,l.jsx)(v.A,{text:e.jobName})})]})}),(0,l.jsx)("td",{children:(0,l.jsx)(o.a,{flex:{direction:"row",alignItems:"center",display:"inline-flex",gap:8},style:{maxWidth:"100%"},children:e.opHandleIDs.map(s=>(0,l.jsxs)(o.a,{flex:{direction:"row",alignItems:"center",display:"inline-flex",gap:8},style:{maxWidth:"100%"},children:[(0,l.jsx)(f.In,{name:"op",color:c.fR()}),(0,l.jsx)(b.N_,{to:(0,D.HG)(n,"/jobs/".concat(e.jobName,"/").concat(s.split(".").join("/"))),children:(0,l.jsx)(v.A,{text:s})})]},s))})})]},e.jobName))})]})]}),[{name:"Schedules",objects:s.schedulesUsing,icon:(0,l.jsx)(f.In,{name:"schedule",color:c.fR()})},{name:"Sensors",objects:s.sensorsUsing,icon:(0,l.jsx)(f.In,{name:"sensors",color:c.fR()})}].filter(e=>{let{objects:s}=e;return s.length>0}).map(e=>{let{name:s,objects:r,icon:t}=e;return(0,l.jsxs)("div",{children:[(0,l.jsx)(G,{children:(0,l.jsx)(h.R2,{children:s})}),(0,l.jsxs)(g.X,{children:[(0,l.jsx)("thead",{children:(0,l.jsx)("tr",{children:(0,l.jsx)("th",{children:"Name"})})}),(0,l.jsx)("tbody",{children:r.map(e=>(0,l.jsx)("tr",{children:(0,l.jsx)("td",{children:(0,l.jsxs)(o.a,{flex:{direction:"row",alignItems:"center",display:"inline-flex",gap:8},style:{maxWidth:"100%"},children:[t,(0,l.jsx)(b.N_,{to:(0,D.HG)(n,"/".concat(s.toLowerCase(),"/").concat(e)),children:(0,l.jsx)(v.A,{text:e})})]})})},s+":"+e))})]})]},s)})]})},X=e=>{let{url:s,name:n,description:r}=e;return(0,l.jsxs)(o.a,{flex:{direction:"column"},children:[(0,l.jsxs)(o.a,{flex:{direction:"row",alignItems:"center",gap:4},style:{maxWidth:"100%"},children:[(0,l.jsx)(f.In,{name:"resource",color:c.iZ()}),(0,l.jsx)("div",{style:{maxWidth:"100%",whiteSpace:"nowrap",fontWeight:500},children:s?(0,l.jsx)(b.N_,{to:s,style:{overflow:"hidden"},children:(0,l.jsx)(v.A,{text:n})}):(0,l.jsx)(v.A,{text:n})})]}),(0,l.jsx)(h.MC,{children:r})]})},q=(0,S.J1)(V()),M=(0,S.J1)(F(),q,N.z)}}]);
//# sourceMappingURL=24.65fdb6a3a25ed474.js.map